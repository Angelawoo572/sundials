#--------------------------------------------------------------------------------------
# File        : Makefile
# Programmers : Radu Serban @ LLNL
#--------------------------------------------------------------------------------------
# Makefile for the SHARED module.
# @configure_input@
#--------------------------------------------------------------------------------------

# Shell
SHELL = @SHELL@

# SUNDIALS instalation directory
prefix      = @prefix@
exec_prefix = @exec_prefix@
includedir  = @includedir@
libdir      = @libdir@

# Path to sources
srcdir = @srcdir@

# Archiver programs
AR = @AR@

# Compiler and compiler options
CC       = @CC@
CPPFLAGS = @CPPFLAGS@
CFLAGS   = @CFLAGS@

# SHARED include directory
SHARED_INC_DIR = ${srcdir}/../include

INCDIRS = -I${SHARED_INC_DIR} 

# SHARED library
SHARED_LIB = libshared.a

# Source and object files
SRC =	${srcdir}/band.c \
	${srcdir}/dense.c \
	${srcdir}/iterativ.c \
	${srcdir}/sundialsmath.c \
	${srcdir}/nvector.c \
	${srcdir}/smalldense.c \
	${srcdir}/spgmr.c

OBJ = band.o dense.o iterative.o sundialsmath.o nvector.o smalldense.o spgmr.o

#--------------------------------------------------------------------------------------
# Make rules
#--------------------------------------------------------------------------------------

all: ${OBJ}

install: ${OBJ}
	${AR} ${SHARED_LIB} ${OBJ}
	cp ${SHARED_LIB} ${libdir}
	cp ${SHARED_INC_DIR}/band.h             ${includedir}
	cp ${SHARED_INC_DIR}/dense.h            ${includedir}
	cp ${SHARED_INC_DIR}/fcmixpar.h         ${includedir}
	cp ${SHARED_INC_DIR}/iterative.h        ${includedir}
	cp ${SHARED_INC_DIR}/sundialsmath.h     ${includedir}
	cp ${SHARED_INC_DIR}/sundialstypes.h    ${includedir}
	cp ${SHARED_INC_DIR}/nvector.h          ${includedir}
	cp ${SHARED_INC_DIR}/smalldense.h       ${includedir}
	cp ${SHARED_INC_DIR}/spgmr.h            ${includedir}

clean:
	rm -f ${OBJ}
	rm -f ${SHARED_LIB}

uninstall:
	rm -f ${libdir}/${SHARED_LIB}
	rm -f ${includedir}/band.h
	rm -f ${includedir}/dense.h
	rm -f ${includedir}/fcmixpar.h
	rm -f ${includedir}/iterative.h
	rm -f ${includedir}/sundialsmath.h
	rm -f ${includedir}/sundialstypes.h
	rm -f ${includedir}/nvector.h
	rm -f ${includedir}/smalldense.h
	rm -f ${includedir}/spgmr.h
	rm -f ${includedir}/complexify.h

band.o : ${srcdir}/band.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
dense.o : ${srcdir}/dense.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
iterative.o : ${srcdir}/iterative.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
sundialsmath.o : ${srcdir}/sundialsmath.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
nvector.o : ${srcdir}/nvector.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
smalldense.o : ${srcdir}/smalldense.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
spgmr.o : ${srcdir}/spgmr.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<

#---End of Makefile---
