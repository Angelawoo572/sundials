#--------------------------------------------------------------------------------------
# File        : Makefile
# Programmers : Radu Serban @ LLNL
#--------------------------------------------------------------------------------------
# Makefile for the SHARED module.
# @configure_input@
#--------------------------------------------------------------------------------------

# Shell
SHELL = @SHELL@

# SUNDIALS instalation directory
prefix = @prefix@
exec_prefix = @exec_prefix@
includedir = @includedir@
libdir = @libdir@

# SHARED include directory
SHARED_INC_DIR = ../include

# SHARED library
SHARED_LIB = libshared.a

# Source and object files
SRC = band.c dense.c iterativ.c sundialsmath.c \
      nvector.c smalldense.c spgmr.c
OBJ = ${SRC:.c=.o}

# Includes
SHAREDINCLUDE = -I${SHARED_INC_DIR}
INCS =  ${SHAREDINCLUDE}

# Compiler and compiler options
CC     = @CC@
CFLAGS = @CFLAGS@

#--------------------------------------------------------------------------------------
# Make rules
#--------------------------------------------------------------------------------------

all: ${OBJ}

install:
	ar rc ${SHARED_LIB} ${OBJ}
	cp ${SHARED_LIB} ${libdir}
	cp ${SHARED_INC_DIR}/band.h             ${includedir}
	cp ${SHARED_INC_DIR}/dense.h            ${includedir}
	cp ${SHARED_INC_DIR}/fcmixpar.h         ${includedir}
	cp ${SHARED_INC_DIR}/iterativ.h         ${includedir}
	cp ${SHARED_INC_DIR}/sundialsmath.h     ${includedir}
	cp ${SHARED_INC_DIR}/sundialstypes.h    ${includedir}
	cp ${SHARED_INC_DIR}/nvector.h          ${includedir}
	cp ${SHARED_INC_DIR}/smalldense.h       ${includedir}
	cp ${SHARED_INC_DIR}/spgmr.h            ${includedir}

clean:
	rm -f ${OBJ}
	rm -f ${SHARED_LIB}

uninstall:
	rm -f ${libdir}/${SHARED_LIB}
	rm -f ${includedir}/band.h
	rm -f ${includedir}/dense.h
	rm -f ${includedir}/fcmixpar.h
	rm -f ${includedir}/iterativ.h
	rm -f ${includedir}/sundialsmath.h
	rm -f ${includedir}/sundialstypes.h
	rm -f ${includedir}/nvector.h
	rm -f ${includedir}/smalldense.h
	rm -f ${includedir}/spgmr.h

.c.o:
	${CC} -c ${CFLAGS} ${INCS} $*.c

#---End of Makefile---
