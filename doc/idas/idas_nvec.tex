%===================================================================================
\chapter{Description of the NVECTOR module}\label{s:nvector}
%===================================================================================
\index{NVECTOR@\texttt{NVECTOR} module}
\input{nvec_generic}


%---------------------------------------------------------------------------
\section{NVECTOR functions used by IDAS}

In Table \ref{t:nvecuse} below, we list the vector functions used in the 
{\nvector} module used by the {\idas} package.
The table also shows, for each function, which of the code modules uses
the function. The {\idas} column shows function usage within the main
integrator module, while the remaining columns show function usage
within each of the {\idas} linear solvers interfaces, the {\idabbdpre}
preconditioner module, and the {\idaa} module.  Here,
{\idadls} stands for the direct linear solver interface in {\idas}, and
{\idaspils} stands for the scaled, preconditioned, iterative linear
solver interface in {\idas}.

\begin{table}[htb]
\centering
\caption{List of vector functions usage by {\idas} code modules}\label{t:nvecuse}
\medskip
\begin{tabular}{|r|c|c|c|c|c|c|} \hline
                                            & 
\begin{sideways}{\idas}      \end{sideways} & 
\begin{sideways}{\idadls}    \end{sideways} & 
\begin{sideways}{\idaspils}  \end{sideways} &
\begin{sideways}{\idabbdpre} \end{sideways} &
\begin{sideways}{\idaa}      \end{sideways}  \\ \hline\hline
%                                      IDAS  DLS   SPILS BBD   IDAA
\id{N\_VGetVectorID}                  &     &     &     &     &     \\ \hline
\id{N\_VClone}                        & \cm &     & \cm & \cm & \cm \\ \hline
\id{N\_VDestroy}                      & \cm &     & \cm & \cm & \cm \\ \hline
\id{N\_VCloneVectorArray}             & \cm &     &     &     & \cm \\ \hline
\id{N\_VDestroyVectorArray}           & \cm &     &     &     & \cm \\ \hline
\id{N\_VSpace}                        & \cm &     &     &     &     \\ \hline
\id{N\_VGetArrayPointer}              &     & \cm &     & \cm &     \\ \hline
\id{N\_VSetArrayPointer}              &     & \cm &     &     &     \\ \hline
\id{N\_VLinearSum}                    & \cm & \cm & \cm &     & \cm \\ \hline
\id{N\_VConst}                        & \cm &     & \cm &     & \cm \\ \hline
\id{N\_VProd}                         & \cm &     & \cm &     &     \\ \hline
\id{N\_VDiv}                          & \cm &     & \cm &     &     \\ \hline
\id{N\_VScale}                        & \cm & \cm & \cm & \cm & \cm \\ \hline
\id{N\_VAbs}                          & \cm &     &     &     &     \\ \hline
\id{N\_VInv}                          & \cm &     &     &     &     \\ \hline
\id{N\_VAddConst}                     & \cm &     &     &     &     \\ \hline
\id{N\_VDotProd}                      &     &     & \cm &     &     \\ \hline
\id{N\_VMaxNorm}                      & \cm &     &     &     &     \\ \hline
\id{N\_VWrmsNorm}                     & \cm &     & \cm &     &     \\ \hline
\id{N\_VMin}                          & \cm &     &     &     &     \\ \hline
\id{N\_VMinQuotient}                  & \cm &     &     &     &     \\ \hline
\id{N\_VConstrMask}                   & \cm &     &     &     &     \\ \hline
\id{N\_VWrmsNormMask}                 & \cm &     &     &     &     \\ \hline
\id{N\_VCompare}                      & \cm &     &     &     &     \\ \hline
\hline
\id{N\_VLinearCombination}            & \cm &     & \cm &     &     \\ \hline 
\id{N\_VScaleAddMulti}                & \cm &     &     &     &     \\ \hline 
\id{N\_VDotProdMulti}                 &     &     & \cm &     &     \\ \hline 
\hline
\id{N\_VLinearSumVectorArray}         & \cm &     &     &     &     \\ \hline 
\id{N\_VScaleVectorArray}             & \cm &     &     &     &     \\ \hline 
\id{N\_VConstVectorArray}             & \cm &     &     &     &     \\ \hline 
\id{N\_VWrmsNormVectorArray}          & \cm &     &     &     &     \\ \hline 
\id{N\_VWrmsNormMaskVectorArray}      & \cm &     &     &     &     \\ \hline 
\id{N\_VScaleAddMultiVectorArray}     & \cm &     &     &     &     \\ \hline 
\id{N\_VLinearCombinationVectorArray} & \cm &     &     &     &     \\ \hline 
\end{tabular}
\end{table}

Of the functions listed in Table \ref{t:nvecops}, \id{N\_VWL2Norm}, 
\id{N\_VL1Norm}, \id{N\_VCloneEmpty}, and \id{N\_VInvTest} 
are {\em not} used by {\idas}. Therefore a user-supplied
{\nvector} module for {\idas} could omit these four functions.

The optional function \id{N\_VDotProdMulti} is only used when Classical
Gram-Schmidt is enabled with {\spgmr} or {\spfgmr}. The remaining
operations from Tables \ref{t:nvecfusedops} and \ref{t:nvecarrayops}
not listed above are unused and a user-supplied {\nvector} module for
{\idas} could omit these operations.
