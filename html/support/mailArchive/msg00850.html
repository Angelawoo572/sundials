<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [sundials&#45;users] CPU&#45;Time and Output -->
<!--X-From-R13: Dnqh Ereona <enqhNyyay.tbi> -->
<!--X-Date: Tue, 30 Jan 2007 09:01:26 &#45;0800 -->
<!--X-Message-Id: 45BF7997.5010007@llnl.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 3DAAD56FE208A84BAE63DF628D8C58B6DAAA41@exchange2003.dspace.de -->
<!--X-Head-End-->
<html>
<head>
<title>Re: [sundials-users] CPU-Time and Output</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00849.html">Date Prev</a>] [<a href="msg00851.html">Date Next</a>] [<a href="msg00847.html">Thread Prev</a>] [<a href="msg00854.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00850">Date Index</a></b>]
[<b><a href="threads.html#00850">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sundials-users] CPU-Time and Output</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Radu Serban &lt;<a href="mailto:radu%40llnl.gov">radu@llnl.gov</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Tue, 30 Jan 2007 09:00:07 -0800</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>Joerg Frochte wrote:
</tt><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>Hello, </tt><br>
<br>
<tt>I wrote a little, quick-and-dirty  &quot;benchmark&quot; (see code below) using<br>
the heat equation with a finite differences discrimination (1000<br>
unknowns) to receive an impression of IDA. Now I wonder about some<br>
strange results. </tt><br>
<br>
<tt>I want to receive an output every millisecond (0.001) over three<br>
different time periods </tt><br>
<br>
<tt>a) [0 , 1]		CPU: 15.266s	Output: smooth 
b) [0 , 10]		CPU: 16.541s	Output: still smooth<br>
c) [0 , 100]	CPU: 20.504s 	Output: looks like linear interpolation </tt><br>
<br>
<tt>This seems a bit strange to me. What dominates the CPU-Time (measured<br>
with &quot;time&quot; under cygwin) so much? </tt><br>
<br>
<tt>Another problem is that the quality of output differs (gnuplot<br>
dat-File). 
Up to now I cannot explain it myself. Isn't it possible to let IDA run<br>
in an &quot;infinitely&quot; loop? Is there a cache or something similar that<br>
limits the &lt;&lt;heat.c&gt;&gt; possibilities? </tt><br>
<br>
<tt>Thanks for any suggestions, </tt><br>
<br>
<tt>Joerg
</tt></blockquote><pre style="margin: 0em;"><br>Joerg,</pre><br>
<tt>I only glanced over your code but I noticed you use the dense linear solver (for 
a Jacobian of dimension 1000x1000). You'll have to monitor the solver statistics 
(e.g. number of steps, number of Jacobian evals., step size, etc) to completely 
grasp where time is spent in the computation. My guess is that you'll find that 
there'll be more Jacobian evaluations at the beginning of the simulation time.</tt><br>
<br>
<tt>For the above reasons you should consider using either the banded linear solver 
or even one of the iterative linear solvers. If this problem is more than just a 
test and if you decide to stick with a direct linear solver (again, banded 
recommended for this type of problems) you may also want to consider 
reformulating the problem as an ODE and use CVODE(S) instead of IDA (CVODE can 
take advantage of the explicit form of the ODE and use fewer Jacobian evaluations)</tt><br>
<br>
<pre style="margin: 0em;"><br></pre><br>
<tt>Take also a look at <a  href="http://www.llnl.gov/casc/sundials/support/notes.html#tout">http://www.llnl.gov/casc/sundials/support/notes.html#tout</a> 
for a discussion on return and output times from the SUNDIALS integrators, as 
well as on the dense output option. You'll notice that, in regions where the 
integrator takes large internal steps,  getting dense output at very close times 
is quite cheap. In other words, ignoring the time spent in factoring the 
Jacobian, the run time is roughly proportional to the number of internal steps 
taken by the integrator and not with the number of output times (or the actual 
value of the time reached).</tt><br>
<br>
<tt>(The above may not be the primary explanation in your case, due to your BC which 
will probably keep the step size from increasing continuously as the simulation 
progresses).</tt><br>
<br>
<pre style="margin: 0em;">I hope that this helps.</pre><br>
<pre style="margin: 0em;">--Radu</pre><br>
<tt>P.S. I didn't quite understand your question on having IDA run in an infinite 
loop. Could you please restate?</tt><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00854" href="msg00854.html">RE: [sundials-users] CPU-Time and Output</a></strong>
<ul><li><em>From:</em> &quot;Joerg Frochte&quot; &lt;JFrochte@dspace.de&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00845" href="msg00845.html">[sundials-users] CPU-Time and Output</a></strong>
<ul><li><em>From:</em> &quot;Joerg Frochte&quot; &lt;JFrochte@dspace.de&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00849.html">[sundials-users] CMake build system for SUNDIALS - Intel Compiler</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00851.html">RE: [sundials-users] CMake build system for SUNDIALS - Intel Compiler</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00847.html">Re: [sundials-users] CPU-Time and Output</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00854.html">RE: [sundials-users] CPU-Time and Output</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00850">
<strong>Main</strong></a></li>
<li><a href="threads.html#00850">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
