<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: cannont compile the examples due to float&#45;store -->
<!--X-From-R13: Dnqh Ereona <freona1Nyyay.tbi> -->
<!--X-Date: Fri, 14 Oct 2005 12:22:39 &#45;0700 (PDT) -->
<!--X-Message-Id: 4350045B.3030605@llnl.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: ba4975150510140958s28cc15c8wc810f3d2a32cb766@mail.gmail.com -->
<!--X-Head-End-->
<html>
<head>
<title>Re: cannont compile the examples due to float-store</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00139.html">Date Prev</a>] [<a href="msg00141.html">Date Next</a>] [<a href="msg00134.html">Thread Prev</a>] [<a href="msg00145.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00140">Date Index</a></b>]
[<b><a href="threads.html#00140">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: cannont compile the examples due to float-store</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Radu Serban &lt;<a href="mailto:serban1%40llnl.gov">serban1@llnl.gov</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Fri, 14 Oct 2005 12:17:47 -0700</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Raju,</pre><br>
The -ffloat-store is a gcc/g77 that enforces exact IEEE conformance on some machines (such as x86 and m68k GNU systems). 
We add this flag by default to CFLAGS if configure decides that the C compiler is GNU C and to FFLAGS is configure 
thinks the compiler is &quot;GNU Fortran 77&quot;.<br>
<br>
In some older version of the code which was computing the unit roundoff internally (now we grab it from float.h) having 
this flag was crucial so we added it in the Makefiles in the source directories (it was not necessary in the Makefiles 
for the SUNDIALS test examples). Later on, some users had floating point problems in their own codes that were resolved 
by using this flag so we decided to add -ffloat-store to the Makefiles for the SUNDIALS test examples just to make users 
aware that it may be needed.<br>
<br>
For some odd reason, configures identifies the later Absoft f90 compilers as &quot;GNU Fortran 77&quot;. Other people have the 
same issue (see <a  href="http://lists.gnu.org/archive/html/autoconf/2000-11/msg00040.html">http://lists.gnu.org/archive/html/autoconf/2000-11/msg00040.html</a>).<br>
<br>
Without the autoconf source files, the only fix I can suggest for you right now is to edit the configure script and 
comment out the lines<br>
FFLAGS=&quot;-ffloat-store&quot;<br>
and<br>
FFLAGS=&quot;${FFLAGS} -ffloat-store&quot;<br>
and then run configure again.<br>
<br>
Or else, if you do not plan on installing SUNDIALS many times, you could just modify the Makefiles that configure 
creates in the fcmix/examples_* directories.<br>
<br>
<pre style="margin: 0em;">--Radu</pre><br>
<tt>Kamaraju Kusumanchi wrote:
</tt><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">Using sundials 2.1.1, gcc 4.0.2, absoft 8.0, Debian Sid system,
2.6.12-1-686-smp kernel.</pre><br>
<pre style="margin: 0em;">gcc and absoft's f90 are working fine on C and fortran 77/90 programs.</pre><br>
<pre style="margin: 0em;">I rant the configure script using the following command.</pre><br>
<pre style="margin: 0em;">/home/software/compileHere/sundials/configure CC=gcc F77=f90 \
--with-fflags=&quot;-B108 -YEXT_NAMES=LCS&quot; --with-f77underscore=one \
--with-f77case=lower \
--with-mpiroot=/home/software/compiledLibs/mpich2_1.0.1_gcc_4.1.0_absoft_8.0 \
2&gt;&amp;1 | tee configure.log</pre><br>
<pre style="margin: 0em;"><br>Except the warning that I wrote in my previous email everything worked
fine and there were no errors.</pre><br>
<pre style="margin: 0em;">Next I did</pre><br>
<pre style="margin: 0em;">make 2&gt;&amp;1 | tee make.log
make install 2&gt;&amp;1 | tee install.log</pre><br>
<pre style="margin: 0em;">Again, these two worked fine. But when I did</pre><br>
<pre style="margin: 0em;">make examples 2&gt;&amp;1 | tee examples.log</pre><br>
<pre style="margin: 0em;">the compilation process barfed when compiling fortran programs.</pre><br>
<pre style="margin: 0em;"><br>Making examples in cvode/fcmix/examples_ser...
make[1]: Entering directory
`/home/software/compiledLibs/sundials_2.1.1_gcc_4.0.2_absoft_8.0_mpich2_1.0.1/cvode/fcmix/examples_ser'
Updating cvdensef.f...
/opt/absoft/bin/f90 -ffloat-store -B108 -YEXT_NAMES=LCS -c ./cvdensef-updated.f
cf90-78 f90fe: ERROR in command line
  -f option has an illegal argument &quot;float-store&quot;.
f90fe-912: 1 Errors found in command line.  Compilation aborted.</pre><br>
<pre style="margin: 0em;">make[1]: *** [cvdensef] Error 1
make[1]: Leaving directory
`/home/software/compiledLibs/sundials_2.1.1_gcc_4.0.2_absoft_8.0_mpich2_1.0.1/cvode/fcmix/examples_ser'</pre><br>
<pre style="margin: 0em;"><br>Now I do not know why -ffloat-store option is being automatically
added to the Absoft (Fortran ) compiler. I checked the manual page of
Absoft and there is no option called float-store or -ffloat-store. Why
is this option being added to the Fortran compiler? Is there any
solution?</pre><br>
<pre style="margin: 0em;">I am attaching the configure.log and examples.log for your kind
reference. Both of them together are 36 Kb and I hope I am not
spamming the list. I thought i would attach them right in the begining
so that experts could look into them and suggest some solution.</pre><br>
<pre style="margin: 0em;"><br>I have also tried passing empty string to FFLAGS and there is no
change in the above behaviour</pre><br>
<pre style="margin: 0em;">/home/software/compileHere/sundials/configure CC=gcc F77=f90 FFLAGS=
--with-fflags=&quot;-B108 -YEXT_NAMES=LCS&quot; --with-f77underscore=one
--with-f77case=lower
--with-mpiroot=/home/software/compiledLibs/mpich2_1.0.1_gcc_4.1.0_absoft_8.0
2&gt;&amp;1 | tee configure.log</pre><br>
<pre style="margin: 0em;"><br>thanks
raju
</pre></blockquote><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00145" href="msg00145.html">Re: cannont compile the examples due to float-store</a></strong>
<ul><li><em>From:</em> Kamaraju Kusumanchi &lt;kamaraju@gmail.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00134" href="msg00134.html">cannont compile the examples due to float-store</a></strong>
<ul><li><em>From:</em> Kamaraju Kusumanchi &lt;kamaraju@gmail.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00139.html">Re: configure script is not recognizing many files</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00141.html">Re: configure script is not recognizing many files</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00134.html">cannont compile the examples due to float-store</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00145.html">Re: cannont compile the examples due to float-store</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00140">
<strong>Main</strong></a></li>
<li><a href="threads.html#00140">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
