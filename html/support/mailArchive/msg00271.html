<!-- MHonArc v2.6.10 -->
<!--X-Subject: R: [sundials&#45;users] Finite difference Jacobian &#45; information to f() when Jacobian is built -->
<!--X-From-R13: Bnbyb Uerccv 3vB <cnbyb.terccvN3vc.vg> -->
<!--X-Date: Fri, 27 Jan 2006 08:57:55 &#45;0800 (PST) -->
<!--X-Message-Id: 200601271656.k0RGuLnh006399@nospam&#45;3.llnl.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: op.s31ptsr2t8lo91@smtp.kuleuven.ac.be -->
<!--X-Head-End-->
<html>
<head>
<title>R: [sundials-users] Finite difference Jacobian - information to f() when Jacobian is built</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00270.html">Date Prev</a>] [<a href="msg00272.html">Date Next</a>] [<a href="msg00270.html">Thread Prev</a>] [<a href="msg00273.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00271">Date Index</a></b>]
[<b><a href="threads.html#00271">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>R: [sundials-users] Finite difference Jacobian - information to f() when Jacobian is built</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Paolo Greppi 3iP &lt;<a href="mailto:paolo.greppi%403ip.it">paolo.greppi@3ip.it</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Fri, 27 Jan 2006 17:56:12 +0100</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>I would not call this low-priority.
The idea has many names, including &quot;inside-out&quot; or &quot;torn procedures&quot; and it
makes a difference.

Imagine your f(...) depends on some expensive intermediate results A (in
general a vector).
We can write f(.., A(...)), although the integrator is not aware of them.

Now you are asking for a flag from the calling function to turn off (tear)
the expensive computation of the A and keep the last value.

When the flag is on (during presuctor-correct steps or whatever) what gets
computed is f(..., Aset), based on the last call of A(...).
When the integrator has finished with the trial and error part, it will call
the f() with the flag turned off and f() will in turn call the function to
compute Aset = A(..), hence results from this call will be correct.
This will speed up things, but the integrator will now see an unexpected
&quot;kick&quot;.

In fact the best would be to make the integrator aware of these As, by
exposing them as unknowns and adding the equations Aset = A().
So what support is required from CVODE ?

P.

-----Messaggio originale-----
Da: owner-sundials-users@lists.llnl.gov
[<a  href="mailto:owner-sundials-users@lists.llnl.gov">mailto:owner-sundials-users@lists.llnl.gov</a>] Per conto di Andreas Nicolai
Inviato: 27 January 2006 17:38
A: sundials-users@llnl.gov
Oggetto: [sundials-users] Finite difference Jacobian - information to f()
when Jacobian is built

Hi there,

here's another feature request for CVODE. It might be nice to find out from
within f() whether the Jacobian-Difference-Quotient algorithm is currently
running?

My algorithm in the f() function is kind of heavy on lengthy and since my
Jacobian would not need to be soo accurate, I'd rather skip some iterations
inside my f() function, when it is used to generate the Jacobian. Right now
I set a flag before I call CVBandDQJac() and clear it when I leave the
function. Checking that flag I can simplify and speed up the f() function
execution quite a bit. Especially for large 2D/3D systems this makes quite a
difference.

It would be nice to have that as a standard feature in CVODE. However, I
would rate it as low priority...

Andreas

-- 
Andreas Nicolai                   Andreas.Nicolai@gmx.net
Syracuse University               +01 (315) 443 1099
151 E.A.Link Hall
Syracuse NY 13244-1240


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00273" href="msg00273.html">Re: R: [sundials-users] Finite difference Jacobian - information to f() when Jacobian is built</a></strong>
<ul><li><em>From:</em> Radu Serban &lt;serban1@llnl.gov&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00270" href="msg00270.html">[sundials-users] Finite difference Jacobian - information to f() when Jacobian is built</a></strong>
<ul><li><em>From:</em> Andreas Nicolai &lt;Andreas.Nicolai@gmx.net&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00270.html">[sundials-users] Finite difference Jacobian - information to f() when Jacobian is built</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00272.html">Re: [sundials-users] Finite difference Jacobian - information to f() when Jacobian is built</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00270.html">[sundials-users] Finite difference Jacobian - information to f() when Jacobian is built</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00273.html">Re: R: [sundials-users] Finite difference Jacobian - information to f() when Jacobian is built</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00271">
<strong>Main</strong></a></li>
<li><a href="threads.html#00271">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
