<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [sundials&#45;users] Problem building Sundials in Visual Studio 2005 -->
<!--X-From-R13: "Xba Brnepr" <wbacrnNtznvy.pbz> -->
<!--X-Date: Mon, 07 Aug 2006 14:29:48 &#45;0700 -->
<!--X-Message-Id: f01d12d40608071423s4e7bb5d0pe8e912418d077354@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: f01d12d40608062132y29f0d1dq2c24828f69655539@mail.gmail.com -->
<!--X-Reference: 44D7531A.4020309@llnl.gov -->
<!--X-Head-End-->
<html>
<head>
<title>Re: [sundials-users] Problem building Sundials in Visual Studio 2005</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00610.html">Date Prev</a>] [<a href="msg00612.html">Date Next</a>] [<a href="msg00610.html">Thread Prev</a>] [<a href="msg00615.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00611">Date Index</a></b>]
[<b><a href="threads.html#00611">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sundials-users] Problem building Sundials in Visual Studio 2005</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
&quot;Jon Pearce&quot; &lt;<a href="mailto:jonpea%40gmail.com">jonpea@gmail.com</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Tue, 8 Aug 2006 09:23:19 +1200</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
Hi Radu,<br><br>Thank you very much for your detailed response.<br><br>I have trialed both of your suggestions, but have not met with any success :-(<br><br>In detail:<br>1.) Ran configure in Cygwin as<br>&nbsp;&nbsp;&nbsp;&nbsp; ./configure --with-cflags=&quot;-mno-cygwin -DNO_FPRINTF_OUTPUT&quot;
<br>2.) Also defined the preprocessor symbol NO_FPRINTF_OUTPUT in the VC++ project properties for each of the Sundials libraries in question (Sundials Shared, NVector, IDA)<br>3.) Manually replaced fprintf(...) calls with printf(...) in the example sources 
irobx.c<br>4.) Rebuilt all libraries in VC++ (from scratch, after a clean step)<br><br>The build errors remain the same - missing symbol __iob_func - as shown below.<br><br>[ BEGIN VC++ BUILD OUTPUT ]<br>------ Rebuild All started: Project: ida_irobx_example, Configuration: Debug Win32 ------
<br>Deleting intermediate and output files for project 'ida_irobx_example', configuration 'Debug|Win32'<br>Compiling...<br>irobx.c<br>Linking...<br>ida.lib(idaio.obj) : error LNK2019: unresolved external symbol ___iob_func referenced in function _IDASetErrFile
<br>ida.lib(idadense.obj) : error LNK2001: unresolved external symbol ___iob_func<br>ida.lib(ida.obj) : error LNK2001: unresolved external symbol ___iob_func<br>C:\coding\contributed\lib\sundials\vc8ide\Debug\ida_irobx_example.exe : fatal error LNK1120: 1 unresolved externals
<br>Build log was saved at &quot;<a href="file://c:\coding\contributed\lib\sundials\vc8ide\Debug\BuildLog.htm">file://c:\coding\contributed\lib\sundials\vc8ide\Debug\BuildLog.htm</a>&quot;<br>ida_irobx_example - 4 error(s), 0 warning(s)
<br>========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ==========<br>[ END VC++ BUILD OUTPUT ]<br><br>Thanks again for your time yesterday. I will reply to the mailing list if I manage to identify a suitable work-around. Of course, I welcome comments from any other users on the list :-)
<br><br>All the best,<br><br>Jon<br><br><br><br><div><span class="gmail_quote">On 08/08/06, <b class="gmail_sendername">Radu Serban</b> &lt;<a href="mailto:radu@llnl.gov">radu@llnl.gov</a>&gt; wrote:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
Hi Jon,<br><br>I hope some of the windows experts on this list will be able to give better advice...<br>I have two suggestions that may be pertinent to your situation:<br><br>1) When building the SUNDIALS libraries under Cygwin, you may want to use the -mno-cygwin flag so that the libraries do not rely on the
<br>cygwin DLL:<br>&nbsp;&nbsp;&nbsp;&nbsp;configure ..... --with-cflags=-mno-cygwin ...<br>For more details, see for example <a href="http://www.delorie.com/howto/cygwin/mno-cygwin-howto.html">http://www.delorie.com/howto/cygwin/mno-cygwin-howto.html
</a><br><br>2) If needed, to disable any references to &quot;fprintf&quot; without modifying the SUNDIALS sources, also use the compiler directive NO_FPRINTF_OUTPUT:<br>&nbsp;&nbsp;&nbsp;&nbsp;configure .... --with-cflags=&quot;-mno-cygwin -DNO_FPRINTF_OUTPUT&quot; ...
<br>For more details, see the thread starting at <a href="http://www.llnl.gov/CASC/sundials/support/mailArchive/msg00260.html">http://www.llnl.gov/CASC/sundials/support/mailArchive/msg00260.html</a><br>In this case you SHOULD implement your own error message handler function (see IDASetErrHandlerFn and the type IDAErrHandlerFn). Note that
<br>this will affect only the SUNDIALS libraries, not the examples (so, you'd still have to manually replace the calls to fprintf in the examples).<br><br>Hope that this helps,<br>--Radu<br><br><br><br>Jon Pearce wrote:<br>
&gt; Dear Sundials Users,<br>&gt;<br>&gt; I am trying to get Sundials to work in Visual Studio 2005. The Sundials<br>&gt; libraries compile without any problems after running configure in<br>&gt; Cygwin. When building one of the example programs shipped with IDA, I
<br>&gt; get the following missing symbol, __iob_func:<br>&gt;<br>&gt; [ BEGIN VC++ BUILD OUTPUT ]<br>&gt; ------ Build started: Project: ida_irobx_example, Configuration: Debug<br>&gt; Win32 ------<br>&gt; Compiling...<br>
&gt; irobx.c<br>&gt; Linking...<br>&gt; irobx.obj : error LNK2019: unresolved external symbol ___iob_func<br>&gt; referenced in function _check_flag<br>&gt; ida.lib(idaio.obj) : error LNK2001: unresolved external symbol ___iob_func
<br>&gt; ida.lib(idadense.obj) : error LNK2001: unresolved external symbol<br>&gt; ___iob_func<br>&gt; ida.lib(ida.obj) : error LNK2001: unresolved external symbol ___iob_func<br>&gt; C:\Documents and Settings\Jon\My<br>&gt; Documents\Jon\jpea047\new\coding\contributed\lib\sundials\vc8ide\Debug\ida_irobx_example.exe
<br>&gt; : fatal error LNK1120: 1 unresolved externals<br>&gt; Build log was saved at &quot; <a href="file://c:\Documents">file://c:\Documents</a> and Settings\Jon\My<br>&gt; Documents\Jon\jpea047\new\coding\contributed\lib\sundials\vc8ide\Debug\BuildLog.htm&quot;
<br>&gt; ida_irobx_example - 5 error(s), 0 warning(s)<br>&gt; [ END VC++ BUILD OUTPUT ]<br>&gt;<br>&gt; It is possible to solve the immediate problem by replacing<br>&gt; fprintf(stderr, ..., ...) with printf(..., ...) in the check_flag()
<br>&gt; static function that is used in many Sundials example programs. However,<br>&gt; the subsequent build output shows that this fix is not sufficient:<br>&gt;<br>&gt; [ BEGIN VC++ BUILD OUTPUT ]<br>&gt; ------ Build started: Project: ida_irobx_example, Configuration: Debug
<br>&gt; Win32 ------<br>&gt; Compiling...<br>&gt; irobx.c<br>&gt; Linking...<br>&gt; ida.lib(idaio.obj) : error LNK2019: unresolved external symbol<br>&gt; ___iob_func referenced in function _IDASetErrFile<br>&gt; ida.lib
(idadense.obj) : error LNK2001: unresolved external symbol<br>&gt; ___iob_func<br>&gt; ida.lib(ida.obj) : error LNK2001: unresolved external symbol ___iob_func<br>&gt; C:\Documents and Settings\Jon\My<br>&gt; Documents\Jon\jpea047\new\coding\contributed\lib\sundials\vc8ide\Debug\ida_irobx_example.exe
<br>&gt; : fatal error LNK1120: 1 unresolved externals<br>&gt; Build log was saved at &quot;<a href="file://c:\Documents">file://c:\Documents</a> and Settings\Jon\My<br>&gt; Documents\Jon\jpea047\new\coding\contributed\lib\sundials\vc8ide\Debug\BuildLog.htm&quot;
<br>&gt; ida_irobx_example - 4 error(s), 0 warning(s)<br>&gt; [ END VC++ BUILD OUTPUT ]<br>&gt;<br>&gt; Looking around on the web, it appears that problems with __iob_func are<br>&gt; Windows-specific.<br>&gt;<br>&gt; I would be grateful to hear if any other users have encountered this
<br>&gt; problem. Has anyone found an effective solution?<br>&gt;<br>&gt; Many thanks for your time,<br>&gt;<br>&gt; Jon Pearce<br></blockquote></div><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00609" href="msg00609.html">[sundials-users] Problem building Sundials in Visual Studio 2005</a></strong>
<ul><li><em>From:</em> &quot;Jon Pearce&quot; &lt;jonpea@gmail.com&gt;</li></ul></li>
<li><strong><a name="00610" href="msg00610.html">Re: [sundials-users] Problem building Sundials in Visual Studio 2005</a></strong>
<ul><li><em>From:</em> Radu Serban &lt;radu@llnl.gov&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00610.html">Re: [sundials-users] Problem building Sundials in Visual Studio 2005</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00612.html">[sundials-users] Re: Question about general paparell ode solver algorithms</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00610.html">Re: [sundials-users] Problem building Sundials in Visual Studio 2005</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00615.html">[sundials-users] Setting boundaries on variables and/or velocities</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00611">
<strong>Main</strong></a></li>
<li><a href="threads.html#00611">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
