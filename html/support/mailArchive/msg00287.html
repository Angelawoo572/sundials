<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [sundials&#45;users] N_VECTOR in Pvode (part 2) -->
<!--X-From-R13: Dnqh Ereona <freona1Nyyay.tbi> -->
<!--X-Date: Tue, 07 Feb 2006 11:27:43 &#45;0800 (PST) -->
<!--X-Message-Id: 43E8F37B.2030903@llnl.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20060203020436.43898.qmail@web37004.mail.mud.yahoo.com -->
<!--X-Head-End-->
<html>
<head>
<title>Re: [sundials-users] N_VECTOR in Pvode (part 2)</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00286.html">Date Prev</a>] [<a href="msg00288.html">Date Next</a>] [<a href="msg00286.html">Thread Prev</a>] [<a href="msg00267.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00287">Date Index</a></b>]
[<b><a href="threads.html#00287">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sundials-users] N_VECTOR in Pvode (part 2)</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Radu Serban &lt;<a href="mailto:serban1%40llnl.gov">serban1@llnl.gov</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Tue, 07 Feb 2006 11:22:35 -0800</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Raj,</pre><br>
Let me start by telling you that you're using a really old version of CVODE (machEnv was renamed to 
NVSpec in August 2003 and was completely removed in February 2004).<br>
<br>
Secondly, would it be possible not to reply to an old posting when changing the topic (even if you 
change the subject line, the email ends up in the wrong thread)?<br>
<br>
Returning to your questions, the single answer to all of them is that in the parallel distributed 
implementation of NVECTOR (i.e. NVECTOR_PARALLEL), each processor allocates space for and uses ONLY 
the local portion of any given N_Vector.<br>
<br>
Unless you have very strong reasons not to, I would suggest you upgrade to the latest version of 
CVODE. The documentation has been considerably extended and the chapter on NVECTOR together with the 
comments in the relevant header files should give you a much better understanding of how parallel 
vectors are implemented and used within SUNDIALS.<br>
<br>
<pre style="margin: 0em;">See more comments below.</pre><br>
<pre style="margin: 0em;">--Radu</pre><br>
raj duffy wrote:
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;"><br></pre><br>
--&gt; u=N_VNew(NEQ,machEnv)  <br>
<br>
<pre style="margin: 0em;">a) Does this mean N_Vector of length NEQ =
(total number of equations) is defined on each processor</pre><br>
<pre style="margin: 0em;">--&gt; cvode_mem = CVodeMalloc(NEQ, f, T0, u, ADAMS, FUNCTIONAL, SS, &amp;reltol,
                          &amp;abstol, data, NULL, FALSE, iopt, ropt, machEnv);</pre><br>
<br>
</blockquote><br>No, NEQ does represent the total number of equations/variables in the ODE system (i.e. the global 
vector length when using parallel distributed vectors), but only the local portion of any given 
N_Vector is stored (and worked on) on a particular processor.<br>
<br>
<pre style="margin: 0em;">(By the way, NEQ was removed as an argument to CVodeMalloc in March 2003!)</pre><br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">a) How come allocated size is total number of equations instead of no. of
equations on each processor</pre><br>
</blockquote><br>For any given N_Vector memory is allocated only for the local portion (i.e. number of 
equations/variables assigned to that processor).<br>
<br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">b) Now f() on each processor only calculates udot defined on that processor
only, so does this mean
that when u (which is of size NEQ) is passed to CVodeMalloc(), CVodeMalloc()
somehow knows that it has to read the initialized values
of uj1 to ujn where uj's are the variables initialized for the processor
under consideration only.</pre><br>
</blockquote><pre style="margin: 0em;"><br>Again, u in f() contains the current values of ONLY the local portion of 
the state vector.</pre><br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">c) If u of size NEQ is indeed defined on each processor, can we initialize
uj1 to ujn using a for loop instead of NV_DATA_P(u).</pre><br>
</blockquote><br>u is not 'of size NEQ'. There are various ways of initializing a parallel distributed N_Vector, the 
NV_DATA_P macro being only one of them. See the current documentation.<br>
<br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><br>Regards<br>
 
Raj<br>
<br>
<pre style="margin: 0em;">__________________________________________________
Do You Yahoo!?
Tired of spam? Yahoo! Mail has the best spam protection around
<a  href="http://mail.yahoo.com">http://mail.yahoo.com</a></pre><br>
</blockquote><pre style="margin: 0em;"><br></pre><br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00286" href="msg00286.html">[sundials-users] N_VECTOR in Pvode (part 2)</a></strong>
<ul><li><em>From:</em> raj duffy &lt;raj_duffy@yahoo.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00286.html">[sundials-users] N_VECTOR in Pvode (part 2)</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00288.html">[sundials-users] Re: Avoiding discontinuities in y_dot</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00286.html">[sundials-users] N_VECTOR in Pvode (part 2)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00267.html">[sundials-users] DAI software</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00287">
<strong>Main</strong></a></li>
<li><a href="threads.html#00287">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
