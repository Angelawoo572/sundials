<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [sundials&#45;users] Intel Compiler and other questions -->
<!--X-From-R13: Dnqh Ereona <enqhNyyay.tbi> -->
<!--X-Date: Wed, 31 Jan 2007 09:05:09 &#45;0800 -->
<!--X-Message-Id: 45C0CBF8.1030303@llnl.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 200701311635.36392.chalupec@kmlinux.fjfi.cvut.cz -->
<!--X-Head-End-->
<html>
<head>
<title>Re: [sundials-users] Intel Compiler and other questions</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00859.html">Date Prev</a>] [<a href="msg00861.html">Date Next</a>] [<a href="msg00857.html">Thread Prev</a>] [<a href="msg00861.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00860">Date Index</a></b>]
[<b><a href="threads.html#00860">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sundials-users] Intel Compiler and other questions</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Radu Serban &lt;<a href="mailto:radu%40llnl.gov">radu@llnl.gov</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Wed, 31 Jan 2007 09:03:52 -0800</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hello Vladimir,</pre><br>
<tt>Vladimir Chalupecky wrote:
</tt><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">Hello,</pre><br>
<tt>I have been using CVode for some time now to my complete satisfaction, it is a 
really nice piece of software. And now it has so happened that I have three 
questions at the same time :-)</tt><br>
<br>
<tt>1) On Tuesday I wanted to learn CMake making a (very simple, just for my 
needs) build system for CVode. Not an easy thing to start with, I admit. What 
was my surprise when in the morning I saw the post on this list, it is just 
an amazing coincidence. It works very nice. I wanted to try to use Intel 
Compiler to build CVode, but somehow I am not able to persuade CMake to use 
it - in ccmake I change CMAKE_C_COMPILER, but after I configure it changes 
back to gcc. The thing is I want to try to build CVode with the -parallel 
option to see if some of the N_Vector_serial's loops get automatically 
parallelized. Has anyone tried this, knows if it works, knows if it brings 
any improvement on dual-core?
</tt></blockquote><pre style="margin: 0em;"><br>From the CMake FAQ:</pre><br>
<tt>I change CMAKE_C_COMPILER in the GUI but it changes back on the next configure 
step. Why?<br>
  Once a build tree is created with a given compiler it cannot be changed. 
There are a variety of implementation reasons for this policy. In order to 
choose a different compiler create a new build tree and set the CC and CXX 
environment variables to the compiler you want before running CMake.<br>
  NOTE: While I don't know what the preferred method of doing it is, I do know 
that the advice above (to set CC and CXX env vars) is in direct conflict with 
advice somewhere else that says not to use env vars to control CMAKE... 
Hopefully someone that knows a little more than I will fix this discrepancy.</tt><br>
<br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>2) I would like to try to solve the phase-field model for solidification in by 
method of lines. The model is something like (nevermind the signs)<br>
*   du/dt = Laplacian u + dp/dt<br>
**  dp/dt = Laplacian p + 1/xi^2 f(p) + F(u)|grad p|<br>
Now, I cannot use CVode for this, can I? Do I have to use IDA?
</tt></blockquote><tt><br>Well, the answer also depends on the boundary conditions. But the above 
equations are PDEs and not PDAEs so you should be able to use either CVODE or 
IDA. As always, when this choice is available, we recommend using CVODE as it is 
more efficient (with direct linear solvers).</tt><br>
<br>
<tt>See the IDA example idakryx.c for a PDE semi-discretized to a DAE (through the 
boundary conditions) and the CVODE example cvkryx.c for a PDE semi-discretized 
to an ODE (by explicitly including the BC).</tt><br>
<br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>3) I am using CVode to solve the ** equation for F=const. xi is a very small 
parameter, f is a cubic polynomial with roots say at u=0, 1/2 and 1. The 
solution develops a thin interface, where it changes rapidly from 0 to 1 and 
otherwise is basically constant. The spatial discretization is by FD. I 
aplied several explicit solvers like RK3(2), Dormand-Prince5(4), 
Runge-Kutta-Merson, RKC and CVode with Spils and Banded solvers (without 
preconditioning). The result is that from the point of runtime, all the 
solvers are more or less comparable, which was quite a surprise (and 
disappointment) for me. Of course, the explicit solvers use much smaller 
timesteps (RK3(2) smallest, RKC largest), Now, what CVode gains in less time 
steps, it has to lose somewhere, I suspect the linear solver. So some kind of 
preconditioning could be used, but this is completely out of my field. I 
guess that the fact that rhs is zero on major part of the domain can be used. 
Any experience or comments on this?
</tt></blockquote><tt><br>You should be able to try the BANDPRE preconditioner provided with CVODE (see 
the CVODE example cvkryx_bp)</tt><br>
<br>
<tt>As an alternative to this operator-splitting way of solving * and ** you could 
try a fully implicit solution by solving both of them simultaneously (which I 
assume is the reason for your 2nd question). Again, the CVODE cvkryx*** examples 
are good starting points. In this case, if you plan on using the banded solver, 
be warned that the ordering of your variables has a heavy influence on the 
efficiency of the linear solver: make sure you order first by PDE component (u 
and p) and then by spatial index(es) and not the other way around (for the 
former case the Jacobian bandwidth is given by the nearest-neighbor in the 
discretized spatial operators while for the latter the 'bandwidth' is actually 
one more than the size of the entire matrix!). If you use one of the Krylov 
solvers, you could again try the band preconditioner CVBANDPRE.</tt><br>
<br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">Best regards,</pre><br>
<pre style="margin: 0em;">Vladimir</pre><br>
</blockquote><pre style="margin: 0em;"><br>Regards,
--Radu</pre><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00861" href="msg00861.html">Re: [sundials-users] Intel Compiler and other questions</a></strong>
<ul><li><em>From:</em> Vladimir Chalupecky &lt;chalupec@kmlinux.fjfi.cvut.cz&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00857" href="msg00857.html">[sundials-users] Intel Compiler and other questions</a></strong>
<ul><li><em>From:</em> Vladimir Chalupecky &lt;chalupec@kmlinux.fjfi.cvut.cz&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00859.html">Re: [sundials-users] CPU-Time and Output</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00861.html">Re: [sundials-users] Intel Compiler and other questions</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00857.html">[sundials-users] Intel Compiler and other questions</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00861.html">Re: [sundials-users] Intel Compiler and other questions</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00860">
<strong>Main</strong></a></li>
<li><a href="threads.html#00860">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
