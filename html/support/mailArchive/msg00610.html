<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [sundials&#45;users] Problem building Sundials in Visual Studio 2005 -->
<!--X-From-R13: Dnqh Ereona <enqhNyyay.tbi> -->
<!--X-Date: Mon, 07 Aug 2006 07:52:36 &#45;0700 -->
<!--X-Message-Id: 44D7531A.4020309@llnl.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: f01d12d40608062132y29f0d1dq2c24828f69655539@mail.gmail.com -->
<!--X-Head-End-->
<html>
<head>
<title>Re: [sundials-users] Problem building Sundials in Visual Studio 2005</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00609.html">Date Prev</a>] [<a href="msg00611.html">Date Next</a>] [<a href="msg00609.html">Thread Prev</a>] [<a href="msg00611.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00610">Date Index</a></b>]
[<b><a href="threads.html#00610">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sundials-users] Problem building Sundials in Visual Studio 2005</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Radu Serban &lt;<a href="mailto:radu%40llnl.gov">radu@llnl.gov</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Mon, 07 Aug 2006 07:50:02 -0700</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Jon,</pre><br>
<pre style="margin: 0em;">I hope some of the windows experts on this list will be able to give better 
advice...
I have two suggestions that may be pertinent to your situation:</pre><br>
<tt>1) When building the SUNDIALS libraries under Cygwin, you may want to use the -mno-cygwin flag so that the libraries do not rely on the 
cygwin DLL:<br>
   configure ..... --with-cflags=-mno-cygwin ...<br>
For more details, see for example <a  href="http://www.delorie.com/howto/cygwin/mno-cygwin-howto.html">http://www.delorie.com/howto/cygwin/mno-cygwin-howto.html</a></tt><br>
<br>
<tt>2) If needed, to disable any references to &quot;fprintf&quot; without modifying the SUNDIALS sources, also use the compiler directive NO_FPRINTF_OUTPUT:<br>
   configure .... --with-cflags=&quot;-mno-cygwin -DNO_FPRINTF_OUTPUT&quot; ...<br>
For more details, see the thread starting at <a  href="http://www.llnl.gov/CASC/sundials/support/mailArchive/msg00260.html">http://www.llnl.gov/CASC/sundials/support/mailArchive/msg00260.html</a><br>
In this case you SHOULD implement your own error message handler function (see IDASetErrHandlerFn and the type IDAErrHandlerFn). Note that 
this will affect only the SUNDIALS libraries, not the examples (so, you'd still have to manually replace the calls to fprintf in the examples).</tt><br>
<br>
<pre style="margin: 0em;">Hope that this helps,
--Radu</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<tt>Jon Pearce wrote:
</tt><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">Dear Sundials Users,</pre><br>
<tt>I am trying to get Sundials to work in Visual Studio 2005. The Sundials 
libraries compile without any problems after running configure in 
Cygwin. When building one of the example programs shipped with IDA, I 
get the following missing symbol, __iob_func:</tt><br>
<br>
<tt>[ BEGIN VC++ BUILD OUTPUT ]<br>
------ Build started: Project: ida_irobx_example, Configuration: Debug 
Win32 ------<br>
Compiling...<br>
irobx.c<br>
Linking...<br>
irobx.obj : error LNK2019: unresolved external symbol ___iob_func 
referenced in function _check_flag<br>
ida.lib(idaio.obj) : error LNK2001: unresolved external symbol ___iob_func<br>
ida.lib(idadense.obj) : error LNK2001: unresolved external symbol 
___iob_func<br>
ida.lib(ida.obj) : error LNK2001: unresolved external symbol ___iob_func<br>
C:\Documents and Settings\Jon\My 
Documents\Jon\jpea047\new\coding\contributed\lib\sundials\vc8ide\Debug\ida_irobx_example.exe 
: fatal error LNK1120: 1 unresolved externals<br>
Build log was saved at &quot; file://c:\Documents and Settings\Jon\My 
Documents\Jon\jpea047\new\coding\contributed\lib\sundials\vc8ide\Debug\BuildLog.htm&quot;<br>
ida_irobx_example - 5 error(s), 0 warning(s)<br>
[ END VC++ BUILD OUTPUT ]</tt><br>
<br>
<tt>It is possible to solve the immediate problem by replacing 
fprintf(stderr, ..., ...) with printf(..., ...) in the check_flag() 
static function that is used in many Sundials example programs. However, 
the subsequent build output shows that this fix is not sufficient:</tt><br>
<br>
<tt>[ BEGIN VC++ BUILD OUTPUT ]<br>
------ Build started: Project: ida_irobx_example, Configuration: Debug 
Win32 ------<br>
Compiling...<br>
irobx.c<br>
Linking...<br>
ida.lib(idaio.obj) : error LNK2019: unresolved external symbol 
___iob_func referenced in function _IDASetErrFile<br>
ida.lib(idadense.obj) : error LNK2001: unresolved external symbol 
___iob_func<br>
ida.lib(ida.obj) : error LNK2001: unresolved external symbol ___iob_func<br>
C:\Documents and Settings\Jon\My 
Documents\Jon\jpea047\new\coding\contributed\lib\sundials\vc8ide\Debug\ida_irobx_example.exe 
: fatal error LNK1120: 1 unresolved externals<br>
Build log was saved at &quot;file://c:\Documents and Settings\Jon\My 
Documents\Jon\jpea047\new\coding\contributed\lib\sundials\vc8ide\Debug\BuildLog.htm&quot;<br>
ida_irobx_example - 4 error(s), 0 warning(s)<br>
[ END VC++ BUILD OUTPUT ]</tt><br>
<br>
<tt>Looking around on the web, it appears that problems with __iob_func are 
Windows-specific.</tt><br>
<br>
<tt>I would be grateful to hear if any other users have encountered this 
problem. Has anyone found an effective solution?</tt><br>
<br>
<pre style="margin: 0em;">Many thanks for your time,</pre><br>
<tt>Jon Pearce
</tt></blockquote><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00611" href="msg00611.html">Re: [sundials-users] Problem building Sundials in Visual Studio 2005</a></strong>
<ul><li><em>From:</em> &quot;Jon Pearce&quot; &lt;jonpea@gmail.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00609" href="msg00609.html">[sundials-users] Problem building Sundials in Visual Studio 2005</a></strong>
<ul><li><em>From:</em> &quot;Jon Pearce&quot; &lt;jonpea@gmail.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00609.html">[sundials-users] Problem building Sundials in Visual Studio 2005</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00611.html">Re: [sundials-users] Problem building Sundials in Visual Studio 2005</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00609.html">[sundials-users] Problem building Sundials in Visual Studio 2005</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00611.html">Re: [sundials-users] Problem building Sundials in Visual Studio 2005</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00610">
<strong>Main</strong></a></li>
<li><a href="threads.html#00610">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
