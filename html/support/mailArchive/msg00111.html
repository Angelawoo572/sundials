<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re 3 Questions on CVODE -->
<!--X-From-R13: Oyna Vvaqznefu <nynauNyyay.tbi> -->
<!--X-Date: Mon, 22 Aug 2005 14:08:06 &#45;0700 (PDT) -->
<!--X-Message-Id: Pine.LNX.4.58.0508221401000.28332@tux64.llnl.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<html>
<head>
<title>Re 3 Questions on CVODE</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00109.html">Date Prev</a>] [<a href="msg00112.html">Date Next</a>] [<a href="msg00109.html">Thread Prev</a>] [<a href="msg00112.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00111">Date Index</a></b>]
[<b><a href="threads.html#00111">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re 3 Questions on CVODE</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Alan Hindmarsh &lt;<a href="mailto:alanh%40llnl.gov">alanh@llnl.gov</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Mon, 22 Aug 2005 14:02:33 -0700 (PDT)</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Hello Hang Su,

1. We have done only a little testing on bandwidth parameters with CVBBDPRE.
First, you should note the relevant words of advice given in the User Guide:

Neither pair of parameters need be the true half-bandwidths of the Jacobian
of the local block of $g$, if smaller values provide a more efficient
preconditioner.  Such an efficiency gain may occur if the couplings
in the ODE system outside a certain bandwidth are considerably weaker than
those within the band.  Reducing \id{mu} and \id{ml} while keeping
\id{mudq} and \id{mldq} at their true values, discards the elements
outside the narrower band.  Reducing both pairs has the additional
effect of lumping the outer Jacobian elements into the computed elements
within the band, and requires more caution and experimentation.

   Second, note the comments in the CVODE Examples document about the
pvkxb example:

In this example, \id{pvkxb}, we solve the same problem in \id{pvkx} above,
but instead of supplying the preconditioner, we use the {\cvbbdpre} module,
which generates and uses a band-block-diagonal preconditioner.  The
half-bandwidths of the Jacobian block on each processor are both equal to
$2\cdot$\id{MXSUB}, and that is the value supplied as \id{mudq} and \id{mldq}
in the call to \id{CVBBDPrecAlloc}.  But in order to reduce storage and 
computation
costs for preconditioning, we supply the values \id{mukeep} = \id{mlkeep} = 2
(= \id{NVARS}) as the half-bandwidths of the retained band matrix blocks.
This means that the Jacobian elements are computed with a difference quotient
scheme using the true bandwidth of the block, but only a narrow band matrix
(bandwidth 5) is kept as the preconditioner.

   This represents a typical case where we expect to see an advantage from
using different choices for the two pairs (mukeep,mlkeep) and (mudq,mldq).

2. No, we definitely designed CVODE and IDA to be variable-step solvers,
not fixed-step solvers.  The name 'solver' is generally used to convey
software that produces a numerical solution satifying some condition
of accuracy.  In contrast, a sequence from the application of a fixed-step
method cannot generally be expected to satisfy such a condition.

   You may want to think of these as 'fixed-step' solvers by specifying
output times 'tout' that are equally spaced.  Then they will return
answers to you at those fixed-sized 'steps'.  The fact that internally
they use variable-sized steps should not concern you.

3. About the pvnx example:  First, you should be aware that this PDE-based
system is nonstiff only for small mesh sizes.  As the mesh is refined, the
diffusion term makes the problem more and more stiff, and then the nonstiff
method option is not appropriate.
   Nevertheless, you should resolve the apparent contradictions in data
on message-passing costs for this example.  There are two 'realtype' words
passed by each processor (except at boundaries), not one, at each f call.
Even so, if you see a slow-down in going from one to two processors,
there must be a very high cost for communication compared to arithmetic
on your machine. You can certainly monitor directly the cumulative number
of communication operations, with counters either in the f function or
in the MPI_Send/MPI_Recv functions.  If those counters exceed 2*NFE each,
there must be a bug somewhere.  If they do not, you'll have to explore
the discrepancy between these counts and your separate data-transfer
count from 'bmon'.  I can't help you further with that.
   Also note that, since only simple vector operations are involved (no
linear algebra), the performance of CVODE on this problem should be
the same (within roundoff) on one or many processors.  The run
counters NST, NFE, etc. should reflect that.  The only variation
w.r.t. number of processors should come from differences due to
roundoff in dot-products, etc.


-Alan H.


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00109.html">Any way to implement Fixed Step Solver?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00112.html">Re: Re 3 Questions on CVODE</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00109.html">Any way to implement Fixed Step Solver?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00112.html">Re: Re 3 Questions on CVODE</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00111">
<strong>Main</strong></a></li>
<li><a href="threads.html#00111">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
