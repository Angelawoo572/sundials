<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: Re&#45;Initialization of Variables -->
<!--X-From-R13: Dnqh Ereona <freona1Nyyay.tbi> -->
<!--X-Date: Mon, 23 Jan 2006 08:21:55 &#45;0800 (PST) -->
<!--X-Message-Id: 43D50172.1090602@llnl.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 000001c62034$03ad8710$61cecb82@CEECADLAB.PSU.EDU -->
<!--X-Head-End-->
<html>
<head>
<title>Re: Re-Initialization of Variables</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00233.html">Date Prev</a>] [<a href="msg00235.html">Date Next</a>] [<a href="msg00233.html">Thread Prev</a>] [<a href="msg00235.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00234">Date Index</a></b>]
[<b><a href="threads.html#00234">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Re-Initialization of Variables</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Radu Serban &lt;<a href="mailto:serban1%40llnl.gov">serban1@llnl.gov</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Mon, 23 Jan 2006 08:16:50 -0800</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
Mukesh wrote:
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em">
<pre style="margin: 0em;">Hello All</pre><br>
After I solve a set of ODEs, I am getting some -ve solutions which<br>
are infact not feasible in reality. So I want to restrict the solutions in<br>
the [0, inf). To achieve this, the first line for my function f() which is<br>
passed to CVODE(f,.....) is 
		If y(i) &lt;0<br>
			{<br>
			y(i) = 0<br>
			}<br>
<br>
However, I find that my code becomes terribly slow after I do this. More so<br>
the solutions obtained now are not always right though they are +ve. <br>
<br>
<pre style="margin: 0em;">        I was wondering if Reinitialization of variable inside the solver be
any different than writing the aforesaid statement in function f(). If so,
how to reinitialize the variables. More so, I presume the iteration of the
next time step starts with the solution of the previous time step. If this
is so and also if the solution obtained from the previous time step is -ve
what value should I reinitialize the variable with.</pre><br>
<pre style="margin: 0em;"><br>Thanking you.</pre><br>
<pre style="margin: 0em;"><br>Regards</pre><br>
Mukesh <br>
<br>
<br>
</blockquote><pre style="margin: 0em;"><br>Hi Mukesh,</pre><br>
See <a  href="http://www.llnl.gov/CASC/sundials/support/mailArchive/msg00040.html">http://www.llnl.gov/CASC/sundials/support/mailArchive/msg00040.html</a><br>
Also, I pasted below the relevant entry in the FAQ that we are preparing for the next release (which 
will be available on the SUNDIALS website).<br>
As emphasized in both places, you should NOT correct the values in the y vector passed to f()!<br>
--Radu<br>
<br>
P.S. Could you please post your questions by replying to a relevant thread on the mailing list or 
else by starting a new thread (rather than replying to the last post)? This would help in having a 
meaningful 'Thread Index' when we archive the messages for the website.<br>
<br>-----------------<br>
How do I control unphysical negative values in CVODE / CVODES?<br>
In many applications, some components in the true solution are always positive or non-negative, 
though at times very small. In the numerical solution, however, small negative (hence unphysical) 
values can then occur. In most cases, these values are harmless, and simply need to be controlled, 
not eliminated. The following pieces of advice are relevant.<br>
<br>
   1. The way to control the size of unwanted negative computed values is with tighter absolute 
tolerances. Again this requires some knowledge of the noise level of these components, which may or 
may not be different for different components. Some experimentation may be needed.<br>
   2. If output plots or tables are being generated, and it is important to avoid having negative 
numbers appear there (for the sake of avoiding a long explanation of them, if nothing else), then 
eliminate them, but only in the context of the output medium. Then the internal values carried by 
the solver are unaffected. Remember that a small negative value in y returned by CVODE, with 
magnitude comparable to abstol or less, is equivalent to zero as far as the computation is concerned.<br>
   3. The user's right-hand side routine f should never change a negative value in the solution 
vector y to a non-negative value, as a &quot;solution&quot; to this problem. This can cause instability. If 
the f routine cannot tolerate a zero or negative value (e.g. because there is a square root or log 
of it), then the offending value should be changed to zero or a tiny positive number in a temporary 
variable (not in the input y vector) for the purposes of computing f(t,y).<br>
<br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00233" href="msg00233.html">RE: Re-Initialization of Variables</a></strong>
<ul><li><em>From:</em> Mukesh &lt;muk139@psu.edu&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00233.html">RE: Re-Initialization of Variables</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00235.html">Re: Re-Initialization of Variables</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00233.html">RE: Re-Initialization of Variables</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00235.html">Re: Re-Initialization of Variables</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00234">
<strong>Main</strong></a></li>
<li><a href="threads.html#00234">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
