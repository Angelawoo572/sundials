<!-- MHonArc v2.6.10 -->
<!--X-Subject: RE: [sundials&#45;users] Compiling SUNDIALS with CLR support (Visual C++) -->
<!--X-From-R13: "Vreoreg Enheb" <Vreoreg_EnhebNxtv.rqh> -->
<!--X-Date: Sun, 06 Aug 2006 19:16:45 &#45;0700 -->
<!--X-Message-Id: 601BBB4D9640CB4693A2384E4B37872E01D629CA@dell2650&#45;0550.kgi.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<html>
<head>
<title>RE: [sundials-users] Compiling SUNDIALS with CLR support (Visual C++)</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00607.html">Date Prev</a>] [<a href="msg00609.html">Date Next</a>] [<a href="msg00602.html">Thread Prev</a>] [<a href="msg00609.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00608">Date Index</a></b>]
[<b><a href="threads.html#00608">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>RE: [sundials-users] Compiling SUNDIALS with CLR support (Visual C++)</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
&quot;Herbert Sauro&quot; &lt;<a href="mailto:Herbert_Sauro%40kgi.edu">Herbert_Sauro@kgi.edu</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Sun, 6 Aug 2006 19:13:01 -0700</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Andreas, I presume you could use WinForms written in C# with sundials?

We have a simulator based on sundials written in C# (no GUI though), it 
communicates information and results via TCP/IP sockets. At the other end we 
have a winforms based GUI.

Herbert Sauro

-----Original Message-----
From:   Andreas Nicolai [<a  href="mailto:Andreas.Nicolai@gmx.net">mailto:Andreas.Nicolai@gmx.net</a>]
Sent:   Sat 8/5/2006 8:04 AM
To:     sundials-users@llnl.gov
Cc:     
Subject:        [sundials-users] Compiling SUNDIALS with CLR support (Visual 
C++)

Hello again,

in response to Aendey, here's how you can get a SUNDIALS solver compiled with 
VC8 (Visual C++ 2005) so that you can link it to your WinForms/.Net application.

in Properties -&gt; Configurations properties:

1. General:
    set &quot;Common Language Runtime Support&quot; to &quot;Pure ... (/clr:pure)&quot;
2. C/C++ -&gt; Code Generation:
    set Runtime library to DLL (depending on mode Debug/Release)
3. C/C++ -&gt; Command line:
    add the line

    /D &quot;_CRT_SECURE_NO_DEPRECATE&quot; /TP

    that takes care of the stupid &quot;deprecated&quot; warnings (which is crap anyway, 
because Microsoft
    only wants to advertise their &quot;safe&quot; C extensions) and /TP is to get CLR 
running

4. in you WinForms GUI application, set the SUNDIALS solver lib as dependency 
and it should work


Btw, I just tried to create a small example for Aendey, basically to create a 
small user interface
using .net and WinForms for the CVODE::cvbanx example. After almost 2 hours I 
gave up. It it fairly
simple to start the solver from .Net, but passing any messages back to a 
WinForm via the error handler
function is impossible. Due to the managed C++ extensions you cannot store 
pointers to forms into
unmanaged objects. However, the userdata struct, that is passed through to your 
error handler function
must not be a managed object (otherwise all sundials code would need to be 
changed to managed C++).
As a consequence, the error handler function, or the f() function or any other 
function called within Sundials,
that would need to make outputs to some WinForms component (like a textbox or 
the like), wouldn't be
able to access the form, since managed pointers (^) cannot be passed along with 
the user data.

Hence, UI development that directly uses sundials solvers and relies on 
messages passed back from the solver is IMHO not possible with the Microsoft 
.Net WinForms lib, or at least very difficult to get this right. If anyone has 
a suggestion how to get the interfacing between sundials functions and WinForms 
code working, please let me know.

For anyone who wants to write graphical user interfaces for sundials solvers, I 
strongly recommend a different GUI toolkit. My recommendation would be to use 
Borland C++ Builder (which is ok) or Trolltech's QT (which is even better and 
easy to learn, too).

Bye,
Andreas

PS: Radu, here's one more Sundials usage scenario in case you need &quot;success&quot; 
stories :-)
     <a  href="http://www.bauklimatik-dresden.de/delphin5">http://www.bauklimatik-dresden.de/delphin5</a>


-- 
Andreas Nicolai                         anicolai@syr.edu
PhD Candidate, M.A.M.E                  (315) 443-1099
Syracuse University
151 Link Hall
Syracuse, NY, 13244




</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00607.html">[sundials-users] Compiling SUNDIALS with CLR support (Visual C++)</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00609.html">[sundials-users] Problem building Sundials in Visual Studio 2005</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00602.html">[sundials-users] How to compile the libs 'libsundialsXXX.l ib' with '/clr' support?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00609.html">[sundials-users] Problem building Sundials in Visual Studio 2005</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00608">
<strong>Main</strong></a></li>
<li><a href="threads.html#00608">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
