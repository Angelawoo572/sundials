<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: User access to c_j? -->
<!--X-From-R13: Oyna Vvaqznefu <nynauNyyay.tbi> -->
<!--X-Date: Mon, 12 Dec 2005 15:33:56 &#45;0800 (PST) -->
<!--X-Message-Id: Pine.LNX.4.58.0512121523120.30267@tux64.llnl.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 200512091644.04891.krlong@sandia.gov -->
<!--X-Reference: 200512110127.34017.krlong@sandia.gov -->
<!--X-Head-End-->
<html>
<head>
<title>Re: User access to c_j?</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00197.html">Date Prev</a>] [<a href="msg00199.html">Date Next</a>] [<a href="msg00193.html">Thread Prev</a>] [<a href="msg00199.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00198">Date Index</a></b>]
[<b><a href="threads.html#00198">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: User access to c_j?</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Alan Hindmarsh &lt;<a href="mailto:alanh%40llnl.gov">alanh@llnl.gov</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Mon, 12 Dec 2005 15:29:06 -0800 (PST)</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Hi Kevin,

See comments below.

-Alan


On Sun, 11 Dec 2005, Kevin Long wrote:
&gt;<i> ...</i>
&gt;<i> My next job, though, is to write an lsolve() function that talks to Trilinos</i>
&gt;<i> linear solvers, and represents Jacobians as Trilinos linear operators. The</i>
&gt;<i> problem I immediately ran into is that to build a problem's Jacobian I need</i>
&gt;<i> c_j and the current time, which are not supplied directly as arguments in</i>
&gt;<i> either the lsolve() or lsetup() interfaces. They are available as fields in</i>
&gt;<i> the IDAMem struct given as the first to lsolve() and lsetup(), but to compile</i>
&gt;<i> any code referring to IDAMem I need access to the header file ida_impl.h.</i>
&gt;<i> Unfortunately, ida_impl.h lives in the ida source directory and is not among</i>
&gt;<i> those installed into the include directory upon &quot;make install&quot;.</i>
&gt;<i></i>
&gt;<i> Thus, I don't see how to do any external solver interface in a clean way.</i>
&gt;<i> There are plenty of hacks that will work -- modifying the SUNDIALS</i>
&gt;<i> configuration to install ida_impl.h for instance, or modifying the Trilinos</i>
&gt;<i> configuration to look for headers in the SUNDIALS source directory in</i>
&gt;<i> addition to the installed include directory -- but while such hacks are</i>
&gt;<i> temporarily OK for me while writing code to test things out, it's not how</i>
&gt;<i> we'd want a production Trilinos (or Petsc, or whatever) SUNDIALS interface to</i>
&gt;<i> work. We *should* be able to configure/make/install SUNDIALS, then have</i>
&gt;<i> Trilinos point to the SUNDIALS installation directory.</i>
&gt;<i></i>
&gt;<i> I can think of a few solutions:</i>
&gt;<i></i>
&gt;<i> (1) Install ida_impl.h so that it's accessible to people writing external</i>
&gt;<i> solver interfaces. Or, at least put the declaration of the IDAMem struct in</i>
&gt;<i> the ida.h header.</i>
&gt;<i></i>
&gt;<i> (2) Provide user-callable functions to access c_j and whatever else is needed</i>
&gt;<i> by an external solver interface writer (one already exists to get the current</i>
&gt;<i> time). This is probably a better solution as it doesn't require the solver</i>
&gt;<i> writer to inspect the guts of IDA's data structures as would be required by</i>
&gt;<i> proposed solution 1 above.</i>
&gt;<i></i>

The solution that makes the most sense is (2): adding user-callable
access routines to get c_j and tn from memory.  But if you are writing
lsetup and lsolve routines that will not use ida_mem at all, you
should check for other variables in ida_mem that you may need to use
there.  For example, our lsetup and solve routines use counters
(e.g. npe) that reside in ida_mem.


&gt;<i> Surely I'm not the first person to try writing an interface to an external </i>
&gt;<i> solver?</i>
&gt;<i></i>

No you are not.  But you seem to be the first that wants to put the whole
linear solver module in a separate place, not residing with SUNDIALS.
Our intention was that new linear solver modules would at least have
their interface functions (lsetup, lsolve, etc.) reside in SUNDIALS, where
they could access the main memory.


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00199" href="msg00199.html">Re: User access to c_j?</a></strong>
<ul><li><em>From:</em> Kevin Long &lt;krlong@sandia.gov&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00192" href="msg00192.html">N_Vector &amp; solver module unit test suite?</a></strong>
<ul><li><em>From:</em> Kevin Long &lt;krlong@sandia.gov&gt;</li></ul></li>
<li><strong><a name="00193" href="msg00193.html">User access to c_j?</a></strong>
<ul><li><em>From:</em> Kevin Long &lt;krlong@sandia.gov&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00197.html">Re: N_Vector &amp; solver module unit test suite?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00199.html">Re: User access to c_j?</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00193.html">User access to c_j?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00199.html">Re: User access to c_j?</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00198">
<strong>Main</strong></a></li>
<li><a href="threads.html#00198">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
