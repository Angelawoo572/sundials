<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [sundials&#45;users] CV_TOO_MUCH_WORK -->
<!--X-From-R13: "Oaqernf @vpbynv" <Oaqernf.@vpbynvNtzk.arg> -->
<!--X-Date: Wed, 14 Jun 2006 12:43:07 &#45;0700 -->
<!--X-Message-Id: op.ta5h7sx5t8lo91@smtp.kuleuven.ac.be -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 001301c68f8c$ba573a70$3df901a3@PCHEARTBREAK -->
<!--X-Head-End-->
<html>
<head>
<title>Re: [sundials-users] CV_TOO_MUCH_WORK</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00500.html">Date Prev</a>] [<a href="msg00502.html">Date Next</a>] [<a href="msg00499.html">Thread Prev</a>] [<a href="msg00506.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00501">Date Index</a></b>]
[<b><a href="threads.html#00501">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sundials-users] CV_TOO_MUCH_WORK</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
&quot;Andreas Nicolai&quot; &lt;<a href="mailto:Andreas.Nicolai%40gmx.net">Andreas.Nicolai@gmx.net</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Wed, 14 Jun 2006 15:39:18 -0400</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Alan,</pre><br>
<pre style="margin: 0em;">here are my thoughts about your questions:</pre><br>
<pre style="margin: 0em;">1. the CV_TOO_MUCH_WORK error</pre><br>
<pre style="margin: 0em;">Use CVodeSetMaxNumSteps() to set the limit to a large number. When the solver 
returns with a CV_TOO_MUCH_WORK error, simply call it again. Use the occasional 
return of the solver to notify the user that something is happening. IMHO the 
max number of steps should be set such, that the user of your code will be told 
about the progress every few minutes, so he doesn't get worried whether the 
solver might have crashed. Therefore, the number of max steps is problem and 
implementation dependent, but - since it doesn't affect your solution - 
completely arbitrary.</pre><br>
<pre style="margin: 0em;">2. Solving PDEs with CVODE:</pre><br>
<pre style="margin: 0em;">If I understand you right you would like to solver a system of PDEs with CVODE. 
The recommanded procedure is to first apply a control volume discretization 
technique (or finite differences or FEM if you like) to obtain a system of ODEs 
which already includes your currents between your cells. Then you can simply 
use CVODE to solve this system of ODEs.</pre><br>
<pre style="margin: 0em;">Here's a framework for an implementation of the f() function for such a problem:</pre><br>
<pre style="margin: 0em;">int f(...) {</pre><br>
<pre style="margin: 0em;">  // 1. update all variables at time point t that remain unchanged during the 
calculation of your
  //    divergences, e.g. boundary conditions etc.</pre><br>
<pre style="margin: 0em;">  // 2. loop over all your elements/cell and calculate potentials based on the 
conserved quantities in
  //    the y vector</pre><br>
<pre style="margin: 0em;">  // 3. loop over all your interfaces/sides and calculate fluxes between your 
virtual cells and add/subtract
  //    the flux contributions to the divergences in all cells affected, that 
is the ydot vector</pre><br>
<pre style="margin: 0em;">  return 0;
}</pre><br>
<pre style="margin: 0em;">I hope this solves your problem. If you really need to solve an ODE per virtual 
cell _and_ iteration (call to f) to actually calculate your potentials, you may 
want to consider using some simpler form of Newton scheme, instead of running a 
CVODE for each of your cells. Also because, most likely your potentials in each 
cell are discontinuous in time anyway.</pre><br>
<pre style="margin: 0em;">Bye,
Andreas</pre><br>
<pre style="margin: 0em;">--
Andreas Nicolai                         anicolai@syr.edu
PhD Candidate, M.A.M.E                  (315) 443-1099
Syracuse University
151 Link Hall
Syracuse, NY, 13244</pre><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00499" href="msg00499.html">[sundials-users] CV_TOO_MUCH_WORK</a></strong>
<ul><li><em>From:</em> &quot;Alan Garny&quot; &lt;alan.garny@physiol.ox.ac.uk&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00500.html">Re: [sundials-users] [Pkg-octave-devel] Sundials</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00502.html">Re: [sundials-users] include file directory layout (was: The lighter side of SUNDIALS)</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00499.html">[sundials-users] CV_TOO_MUCH_WORK</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00506.html">Re: [sundials-users] CV_TOO_MUCH_WORK</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00501">
<strong>Main</strong></a></li>
<li><a href="threads.html#00501">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
