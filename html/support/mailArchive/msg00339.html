<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [sundials&#45;users] Sundials compilation error (problem with xlc/xlf?) -->
<!--X-From-R13: QI Khna <tybonyenirNlnubb.pbz> -->
<!--X-Date: Fri, 03 Mar 2006 01:25:04 &#45;0800 (PST) -->
<!--X-Message-Id: 20060303092158.62887.qmail@web30808.mail.mud.yahoo.com -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 4407A383.6030006@llnl.gov -->
<!--X-Derived: binpKKcSDO9yx.bin -->
<!--X-Head-End-->
<html>
<head>
<title>Re: [sundials-users] Sundials compilation error (problem with xlc/xlf?)</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00338.html">Date Prev</a>] [<a href="msg00340.html">Date Next</a>] [<a href="msg00338.html">Thread Prev</a>] [<a href="msg00343.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00339">Date Index</a></b>]
[<b><a href="threads.html#00339">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sundials-users] Sundials compilation error (problem with xlc/xlf?)</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
CW Yuan &lt;<a href="mailto:globalrave%40yahoo.com">globalrave@yahoo.com</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Fri, 03 Mar 2006 01:21:58 -0800 (PST)</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Dear Aaron and Radu,

I've tried to use the configure options:
CC=xlc F77=xlf --with-cflags=&quot;-qarch=auto -qtune=auto&quot;
\
--with-fflags=&quot;-qarch=auto -qtune=auto&quot;

(I didn't specify mpicc and mpif77 b/c the configure
script finds the correct mpi compiling scripts, which
specifies xlc and xlf within them.)

However, we've encountered errors when compiling. I've
attached the error log with this message (those errors
were the reason why we tried to used gcc and g77 in
the first place). The error log seems to indicate two
types of error. 1) syntax error related to
usr/include/bits/mathcalls.h and 2) undeclared
identifier DBL_MAX when compiling nvector_parallel.c.
Hopefully you can shed some light.

thanks so much,

-CW

--- Aaron Collier &lt;collier6@llnl.gov&gt; wrote:

&gt;<i> Dear CW,</i>
&gt;<i> </i>
&gt;<i> You should not use &quot;pwr3&quot; since your system is based</i>
&gt;<i> on the PowerPC </i>
&gt;<i> architecture and not on the POWER hardware platform.</i>
&gt;<i>  You could try the </i>
&gt;<i> following:</i>
&gt;<i> </i>
&gt;<i>   $ CC=xlc F77=xlf --with-cflags=&quot;-qarch=auto</i>
&gt;<i> -qtune=auto&quot; \</i>
&gt;<i>     --with-fflags=&quot;-qarch=auto -qtune=auto&quot; \</i>
&gt;<i>     --with-mpicc=mpcc \</i>
&gt;<i>     --with-mpif77=mpxlf</i>
&gt;<i> </i>
&gt;<i> --Aaron</i>
&gt;<i> </i>
&gt;<i> Radu Serban wrote:</i>
&gt;<i> &gt; CW wrote:</i>
&gt;<i> &gt;&gt; Hello,</i>
&gt;<i> &gt;&gt;</i>
&gt;<i> &gt;&gt; I'm trying in agony to compile the Sundials</i>
&gt;<i> package (especially the </i>
&gt;<i> &gt;&gt; parallel code) onto our cluster. Heres a</i>
&gt;<i> description of the hardware </i>
&gt;<i> &gt;&gt; from the &quot;uname -a&quot; command:</i>
&gt;<i> &gt;&gt;</i>
&gt;<i> &gt;&gt; Linux nano 2.6.15-1.1969_FC5 #1 SMP Sun Feb 19</i>
&gt;<i> 05:14:37 EST 2006 ppc64 </i>
&gt;<i> &gt;&gt; ppc64 ppc64 GNU/Linux</i>
&gt;<i> &gt;&gt;</i>
&gt;<i> &gt;&gt; I've attached the screen messages copied from the</i>
&gt;<i> terminal after I </i>
&gt;<i> &gt;&gt; perform</i>
&gt;<i> &gt;&gt; /config CC=gcc F77=g77</i>
&gt;<i> &gt;&gt; make</i>
&gt;<i> &gt;&gt; make install</i>
&gt;<i> &gt;&gt; make examples</i>
&gt;<i> &gt;&gt;</i>
&gt;<i> &gt;&gt; But I think I've pretty much nailed down the</i>
&gt;<i> source of the problem, </i>
&gt;<i> &gt;&gt; pending your approval. After I changed the</i>
&gt;<i> compilers to gcc and gcc, I </i>
&gt;<i> &gt;&gt; was able to compile the serial codes to get the</i>
&gt;<i> serial library files </i>
&gt;<i> &gt;&gt; and create the serial examples. But I couldn't do</i>
&gt;<i> that with the </i>
&gt;<i> &gt;&gt; parallel codes because the parallel codes are</i>
&gt;<i> compiled with the </i>
&gt;<i> &gt;&gt; &quot;mpicc&quot; and &quot;mpif77&quot; scripts, which use &quot;xlc&quot; and</i>
&gt;<i> &quot;xlf&quot; (IBM c/fortran </i>
&gt;<i> &gt;&gt; compilers, scripts attached) to compile the</i>
&gt;<i> codes. Hence I get error </i>
&gt;<i> &gt;&gt; messages in the when I &quot;make&quot; and &quot;make</i>
&gt;<i> examples&quot;.</i>
&gt;<i> &gt;&gt;</i>
&gt;<i> &gt;&gt; I wonder if there's some incompatibility between</i>
&gt;<i> Sundials and xlc/xlf? </i>
&gt;<i> &gt;&gt; If my assessment of the problem is wrong, what</i>
&gt;<i> would be your take?</i>
&gt;<i> &gt;&gt;</i>
&gt;<i> &gt;&gt; Thank you very much.</i>
&gt;<i> &gt;&gt;</i>
&gt;<i> &gt;&gt; Sincerely yours,</i>
&gt;<i> &gt;&gt;</i>
&gt;<i> &gt;&gt; CW</i>
&gt;<i> &gt; </i>
&gt;<i> &gt; CW,</i>
&gt;<i> &gt; </i>
&gt;<i> &gt; A quick Google search will show that there are</i>
&gt;<i> several incompatibilities </i>
&gt;<i> &gt; between gcc and xlc, which is apparently what</i>
&gt;<i> happens in your case (look </i>
&gt;<i> &gt; at the compilation errors for nvec_par in your</i>
&gt;<i> Sundials_make.txt file. </i>
&gt;<i> &gt; Most of the subsequent errors you see in compiling</i>
&gt;<i> the parallel examples </i>
&gt;<i> &gt; come from the fact that nvec_par was not</i>
&gt;<i> installed!).</i>
&gt;<i> &gt; </i>
&gt;<i> &gt; That being said, there is no incompatibility</i>
&gt;<i> between SUNDIALS and </i>
&gt;<i> &gt; xlc/xlf. SUNDIALS has been compiled on AIX without</i>
&gt;<i> problems. however, we </i>
&gt;<i> &gt; do not mix gcc and xlc.</i>
&gt;<i> &gt; </i>
&gt;<i> &gt; Is there any reason why you do not use CC=xlc and</i>
&gt;<i> F77=xlf? FYI, here's a </i>
&gt;<i> &gt; set of configure options that we used to build</i>
&gt;<i> SUNDIALS with xlc/xlf. </i>
&gt;<i> &gt; Try them out:</i>
&gt;<i> &gt; </i>
&gt;<i> &gt; CC=xlc F77=xlf --with-cflags=&quot;-qarch=pwr3</i>
&gt;<i> -qtune=pwr3 -qmaxmem=8192&quot; </i>
&gt;<i> &gt; --with-fflags=&quot;-qarch=pwr3 -qtune=pwr3</i>
&gt;<i> -qmaxmem=8192&quot; --with-mpicc=mpcc </i>
&gt;<i> &gt; --with-mpif77=mpxlf</i>
&gt;<i> &gt; </i>
&gt;<i> &gt; --Radu</i>
&gt;<i> &gt; </i>
&gt;<i> &gt; </i>
&gt;<i> </i>

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
<a  href="http://mail.yahoo.com">http://mail.yahoo.com</a> </pre><p><strong>Attachment:
<a href="binpKKcSDO9yx.bin" >err.log</a></strong><br>
<em>Description:</em> 2001658238-err.log</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00343" href="msg00343.html">Re: [sundials-users] Sundials compilation error (problem with xlc/xlf?)</a></strong>
<ul><li><em>From:</em> Aaron Collier &lt;collier6@llnl.gov&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00338" href="msg00338.html">Re: [sundials-users] Sundials compilation error (problem with xlc/xlf?)</a></strong>
<ul><li><em>From:</em> Aaron Collier &lt;collier6@llnl.gov&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00338.html">Re: [sundials-users] Sundials compilation error (problem with xlc/xlf?)</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00340.html">RE: [sundials-users] Changing algebraic variables during integration   with IDA</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00338.html">Re: [sundials-users] Sundials compilation error (problem with xlc/xlf?)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00343.html">Re: [sundials-users] Sundials compilation error (problem with xlc/xlf?)</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00339">
<strong>Main</strong></a></li>
<li><a href="threads.html#00339">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
