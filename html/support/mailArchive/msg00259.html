<!-- MHonArc v2.6.10 -->
<!--X-Subject: RE: error messages and logging -->
<!--X-From-R13: Emr&#45;Bvat Ibat <jbatNragrybf.pbz> -->
<!--X-Date: Wed, 25 Jan 2006 09:25:33 &#45;0800 (PST) -->
<!--X-Message-Id: B56908D27FB07B48A05FCC6FC91A0467066E0A10@mithril.entelos.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<html>
<head>
<title>RE: error messages and logging</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00258.html">Date Prev</a>] [<a href="msg00260.html">Date Next</a>] [<a href="msg00257.html">Thread Prev</a>] [<a href="msg00260.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00259">Date Index</a></b>]
[<b><a href="threads.html#00259">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>RE: error messages and logging</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Sze-Ping Wong &lt;<a href="mailto:wong%40entelos.com">wong@entelos.com</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Wed, 25 Jan 2006 09:17:45 -0800</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>I have captured error codes and messages in a similar way, except I did
not modify SUNDIALS since it will make it easier to upgrade.

Here's what i did:
Error messages are redirected to a log file.
All CVode calls are checked for error returns. When one is found, an
exception is thrown (i use C++) with the error code and the name of the
calling function.  The exception is basically a table look up using
error code and calling function name for the appropriate error message
(those in the documentation). Then I stuff the error message and
whatever is in the log file into a stream which gets dumped into a
window.

sze-ping

-----Original Message-----
From: owner-sundials-users@lists.llnl.gov
[<a  href="mailto:owner-sundials-users@lists.llnl.gov">mailto:owner-sundials-users@lists.llnl.gov</a>] On Behalf Of Emery Conrad
Sent: Wednesday, January 25, 2006 6:21 AM
To: sundials-users@llnl.gov
Subject: Re: error messages and logging



Andreas Nicolai wrote:
&gt;<i></i>
&gt;<i> Why not use the same interface system that makes Sundials already very</i>

&gt;<i> flexible? We could just have another interface function like:</i>
&gt;<i></i>
&gt;<i>     CVodeSetErrorHandler(cvodemem, error_handler)</i>
&gt;<i></i>
&gt;<i> where error_handler() is some user defined function like</i>
&gt;<i></i>
&gt;<i>     void error_handler(int error_code, const char * msg, void * data);</i>
&gt;<i></i>
&gt;<i> Whenever such an error_handler function is set, instead of writing </i>
&gt;<i> error messages directly with fprintf() all those calls are simply </i>
&gt;<i> replaced with an sprintf into a buffer and a call to error_handler.</i>
&gt;<i></i>
&gt;<i> Would that work while keeping the required code modifications small?</i>
&gt;<i></i>

I think this is a fine idea... this is essentially what I did, brute
force. This allows users to handle the message themselves, which is what
a library should really do. (And would of course make the upgrade path
easier for those like me who have already taken matters into their own
hands and made upgrades with future versions and bug fixes of CVODE a
bit more tedious for ourselves...)

Emery


&gt;<i> Andreas</i>
&gt;<i></i>
&gt;<i> --Andreas Nicolai                   Andreas.Nicolai@gmx.net</i>
&gt;<i> Syracuse University               +01 (315) 443 1099</i>
&gt;<i> 151 E.A.Link Hall</i>
&gt;<i> Syracuse NY 13244-1240</i>
&gt;<i></i>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00258.html">RE: Building SUNDIALS/CVODE on Windows</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00260.html">Error message handling</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00257.html">RE: error messages and logging</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00260.html">Error message handling</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00259">
<strong>Main</strong></a></li>
<li><a href="threads.html#00259">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
