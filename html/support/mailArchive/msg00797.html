<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [sundials&#45;users] Trouble cross compiling -->
<!--X-From-R13: Dnqh Ereona <enqhNyyay.tbi> -->
<!--X-Date: Fri, 01 Dec 2006 13:33:19 &#45;0800 -->
<!--X-Message-Id: 45709F1B.8090405@llnl.gov -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 162F28AC1B1F0545879E439DAD9167D6029FE5B4@ES22SNLNT.srn.sandia.gov -->
<!--X-Reference: 456F8D60.3010704@llnl.gov -->
<!--X-Head-End-->
<html>
<head>
<title>Re: [sundials-users] Trouble cross compiling</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00796.html">Date Prev</a>] [<a href="msg00798.html">Date Next</a>] [<a href="msg00794.html">Thread Prev</a>] [<a href="msg00795.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00797">Date Index</a></b>]
[<b><a href="threads.html#00797">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sundials-users] Trouble cross compiling</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Radu Serban &lt;<a href="mailto:radu%40llnl.gov">radu@llnl.gov</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Fri, 01 Dec 2006 13:31:07 -0800</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>Aaron Collier wrote:
</tt><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">Dear Richard Drake,</pre><br>
<tt>SUNDIALS does not currently support cross compiling, so you will need to 
update the Makefiles and manually create the sundials_config.h header 
file.  Details on building SUNDIALS without using the default build 
system are provided in the 'Building SUNDIALS without the configure 
script' section of the installation chapter in any of the SUNDIALS user 
guides.</tt><br>
<br>
<pre style="margin: 0em;">Respectfully,
Aaron Collier</pre><br>
<tt>Drake, Richard R wrote:
</tt><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">Has anyone tried &quot;cross compiling&quot; sundials?  I am at Sandia National
Labs and trying sundials on the big Red Storm machine.  We have a Linux
box that we compile on, then take executables to the service nodes of
the Red Storm machine, and run the executables on the compute nodes.
The trick for autotools type builds is to avoid running test executables
that configure compiles (because you can't).</pre><br>
<pre style="margin: 0em;">I am running into a problem building sundials by cross compiling due to
the following error.</pre><br>
<pre style="margin: 0em;">Am I feeding the configure script correctly?</pre><br>
<pre style="margin: 0em;">Thanks,</pre><br>
<pre style="margin: 0em;">-rich</pre><br>
<pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">configure
--prefix=/projects/alegra/rrdrake/TPL/sundials/2.2.0/build/opt_storm
--host=i686-intel-linux --disable-examples --disable-shared
--disable-mpi CC=&quot;cc&quot; CXX=&quot;CC&quot; F77=&quot;ftn&quot; CFLAGS=&quot;-tp k8-64 -fastsse&quot;
CXXFLAGS=&quot;-tp k8-64 -fastsse&quot; FFLAGS=&quot;-tp k8-64 -fastsse&quot;
CPPFLAGS=&quot;-DCODE_MP -DMPICH_SKIP_MPICXX -DNO_FCNTL -DNO_TIMES -DNO_SYNC
-DNDEBUG&quot; AR=&quot;ar&quot; AR_FLAGS=&quot;rcv&quot;
</pre></blockquote></blockquote><pre style="margin: 0em;"><br>Hi Rich,</pre><br>
<tt>The problem you're seeing comes from the fact that the configure script cannot 
run any tests while configuring for cross-compilation. Unfortunately, to test if 
the C compiler is actually a C++ compiler, we must run a simple test program and 
this is where configure fails in your case. While I cannot guarantee that this 
will work (there may be other places that need to be fixed to fully support 
cross-compilation), please try the following:</tt><br>
<br>
<pre style="margin: 0em;">1. Copy the attached patch file into the top sundials source directory
(I take it you are using sundials-2.2.0 so this patch is for that version)</pre><br>
<pre style="margin: 0em;">2. apply the attached patch to acinclude.m4:
% patch acinclude.m4 &lt; acinclude_cpp_patch</pre><br>
<tt>(with this patch, the configure script will assume that, when cross-compiling, 
the C compiler is NOT a C++ compiler. This should be fine for you since it seems 
the cross-compiler you use is pgcc, but a general solution will have to do 
something more sophisticated)</tt><br>
<br>
<pre style="margin: 0em;">3. regenerate the configure script:
% aclocal --force
% autoconf -f
% autoheader -f</pre><br>
<pre style="margin: 0em;">and try the configuration again.</pre><br>
<pre style="margin: 0em;">Let's hope this will do it.
--Radu
</pre><pre>--- acinclude.m4.old    2006-12-01 13:13:43.000000000 -0800
+++ acinclude.m4        2006-12-01 13:15:05.000000000 -0800
@@ -650,7 +650,12 @@
 AC_MSG_RESULT([no])
 # COMP_NAMPE is NOT a C++ compiler
 USING_CPLUSPLUS_COMP=&quot;no&quot;
-])
+],
+[
+# If cross-compiling, assume CC is NOT a C++ compiler
+USING_CPLUSPLUS_COMP=&quot;no&quot;
+]
+)
 
 # Revert back to previous language
 AC_LANG_POP([C])
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00793" href="msg00793.html">[sundials-users] Trouble cross compiling</a></strong>
<ul><li><em>From:</em> &quot;Drake, Richard R&quot; &lt;rrdrake@sandia.gov&gt;</li></ul></li>
<li><strong><a name="00794" href="msg00794.html">Re: [sundials-users] Trouble cross compiling</a></strong>
<ul><li><em>From:</em> Aaron Collier &lt;collier6@llnl.gov&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00796.html">RE: [sundials-users] Trouble cross compiling</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00798.html">RE: [sundials-users] Trouble cross compiling</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00794.html">Re: [sundials-users] Trouble cross compiling</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00795.html">Re: [sundials-users] Trouble cross compiling</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00797">
<strong>Main</strong></a></li>
<li><a href="threads.html#00797">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
