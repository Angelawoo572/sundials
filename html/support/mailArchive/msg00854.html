<!-- MHonArc v2.6.10 -->
<!--X-Subject: RE: [sundials&#45;users] CPU&#45;Time and Output -->
<!--X-From-R13: "Xbret Tebpugr" <XTebpugrNqfcnpr.qr> -->
<!--X-Date: Wed, 31 Jan 2007 00:27:26 &#45;0800 -->
<!--X-Message-Id: 3DAAD56FE208A84BAE63DF628D8C58B6DAAAF4@exchange2003.dspace.de -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 45BF7997.5010007@llnl.gov -->
<!--X-Head-End-->
<html>
<head>
<title>RE: [sundials-users] CPU-Time and Output</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00853.html">Date Prev</a>] [<a href="msg00855.html">Date Next</a>] [<a href="msg00850.html">Thread Prev</a>] [<a href="msg00859.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00854">Date Index</a></b>]
[<b><a href="threads.html#00854">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>RE: [sundials-users] CPU-Time and Output</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
&quot;Joerg Frochte&quot; &lt;<a href="mailto:JFrochte%40dspace.de">JFrochte@dspace.de</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Wed, 31 Jan 2007 09:25:35 +0100</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hello, 

&gt;<i> I only glanced over your code but I noticed you use the dense </i>
&gt;<i> linear solver (for a Jacobian of dimension 1000x1000).</i>

I assumed that the dense solver not the optimal choice, 
nevertheless I expected that runtime behaviour like this

CPU = C*(TimePeriot) + eps 

eps (small) for initialisation time and C a constant. 
However, what I have seen is more like this

CPU = eps*(TimePeriot) + C  

That was a bit unexpected for me. 

[..]
&gt;<i> My guess is </i>
&gt;<i> that you'll find that there'll be more Jacobian evaluations </i>
&gt;<i> at the beginning of the simulation time.</i>

Mmmm. I do not really understand the reason. 
I assumed that there is a Newton iteration in every time step. 
Why is the first step so expensive (CPU-Time)? 
Because of the initial condition calculation (see below)?

&gt;<i> For the above reasons you should consider using either the </i>
&gt;<i> banded linear solver or even one of the iterative linear </i>
&gt;<i> solvers. If this problem is more than just a test</i>

Just a little test to get an impression ;-)
It is just the first thing I consider to construct a DAE problem 
with a given number of unknowns (10 , 1000; 10000 ...). 

&gt;<i> Take also a look at </i>
&gt;<i> <a  href="http://www.llnl.gov/casc/sundials/support/notes.html#tout">http://www.llnl.gov/casc/sundials/support/notes.html#tout</a></i>
&gt;<i> for a discussion on return and output times from the SUNDIALS </i>
&gt;<i> integrators,</i>

Thanks. That looks very interesting. 

&gt;<i> as well as on the dense output option. You'll </i>
&gt;<i> notice that, in regions where the integrator takes large </i>
&gt;<i> internal steps,  getting dense output at very close times is </i>
&gt;<i> quite cheap. In other words, ignoring the time spent in </i>
&gt;<i> factoring the Jacobian, the run time is roughly proportional </i>
&gt;<i> to the number of internal steps taken by the integrator and </i>
&gt;<i> not with the number of output times (or the actual value of </i>
&gt;<i> the time reached).</i>

Yes. That is the point I did not understand...

How is this technique working? 
I thought IDA was doing something like this

F( (y^{n+1}-y^{n}) / dt,y^{n+1},t ) = 0

and solves this problem in a Newton like iteration in every time step.
For this iteration the Jacobian has to evaluate in every step. 
However, that seems to be wrong or is only half of the truth. 
Is it the initial condition calculation that takes so much time? 
 
&gt;<i> (The above may not be the primary explanation in your case, </i>
&gt;<i> due to your BC </i>

BC = Boundary Condition ??

&gt;<i> which will probably keep the step size from </i>
&gt;<i> increasing continuously as the simulation progresses).</i>
&gt;<i> </i>
&gt;<i> I hope that this helps.</i>

I see a glimpse of light... :-)

&gt;<i> P.S. I didn't quite understand your question on having IDA </i>
&gt;<i> run in an infinite loop. Could you please restate?</i>

Lets for example consider a well posed, not that stiff problem 
and an input parameter alpha that can be changed steady by a user (GUI) 
or sensor etc. In example above the boundary condition could 
e.g. be y(0,t)=alpha. Thus, we have the problem:

F(d/dt y,y,t,alpha) = 0 

Now e.g. the program runs in an infinite loop and computes the solution
y, 
display the results, while the user may changes alpha steady using a
slight bar. 
I such I case (changing parameter) I assume it would be necessary to
call 
IDAReInit(?) or maybe alpha could be a global variable...
Nevertheless, because the &quot;output problem&quot; was just a mistake of the 
visualisation I assume that this would be no problem at all. 

Thanks a lot,

Joerg

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00859" href="msg00859.html">Re: [sundials-users] CPU-Time and Output</a></strong>
<ul><li><em>From:</em> Radu Serban &lt;radu@llnl.gov&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00850" href="msg00850.html">Re: [sundials-users] CPU-Time and Output</a></strong>
<ul><li><em>From:</em> Radu Serban &lt;radu@llnl.gov&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00853.html">Re: [sundials-users] CMake build system for SUNDIALS - Intel Compiler</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00855.html">RE: [sundials-users] CMake build system for SUNDIALS - Intel Compiler</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00850.html">Re: [sundials-users] CPU-Time and Output</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00859.html">Re: [sundials-users] CPU-Time and Output</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00854">
<strong>Main</strong></a></li>
<li><a href="threads.html#00854">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
