<!-- MHonArc v2.6.10 -->
<!--X-Subject: RE: [sundials&#45;users] Problem with IDA -->
<!--X-From-R13: "[npn" <zsf26Nohssnyb.rqh> -->
<!--X-Date: Mon, 17 Jul 2006 16:24:21 &#45;0700 -->
<!--X-Message-Id: 000301c6a9f7$6dcdd4e0$ae13cd80@eng.buffalo.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 44BC0790.2030401@llnl.gov -->
<!--X-Head-End-->
<html>
<head>
<title>RE: [sundials-users] Problem with IDA</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00578.html">Date Prev</a>] [<a href="msg00580.html">Date Next</a>] [<a href="msg00577.html">Thread Prev</a>] [<a href="msg00580.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00579">Date Index</a></b>]
[<b><a href="threads.html#00579">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>RE: [sundials-users] Problem with IDA</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
&quot;Maca&quot; &lt;<a href="mailto:mfs26%40buffalo.edu">mfs26@buffalo.edu</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Mon, 17 Jul 2006 19:19:18 -0400</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Radu,

I know it is a problem with the variable not being initialized since I get
the following exception when running my program with a debugger:

&quot;Run-Time Check Failure #3 - The variable 'err_k' is being used without
being defined. &quot;

And the exception points to the IDAHandleNFlag function call. If I set both
err_k and err_km1 to 0 before this function is called, I do not get the
exception. So this may be an issue with the compiler I am using (Microsoft
Visual C 2005).

Thanks,
Maca

-----Original Message-----
From: owner-sundials-users@lists.llnl.gov
[<a  href="mailto:owner-sundials-users@lists.llnl.gov">mailto:owner-sundials-users@lists.llnl.gov</a>] On Behalf Of Radu Serban
Sent: Monday, July 17, 2006 5:57 PM
To: sundials-users@llnl.gov
Subject: Re: [sundials-users] Problem with IDA

Macarena:

If the nonlinear solver fails, there is no sense to perform the error test.
If nflag is not IDA_SUCCESS after IDAnls, then this fact is recognized in
IDAHandleNFLag which, in this case, does not require err_k or err_km1. In
any case, both err_k and err_km1 are set to default values 0.0 when entering
IDAStep (only to prevent compiler warnings!), so I doubt that the reason for
which your code crashes is the one you stated.

The modification you've made to the code is incorrect. Undo it and look for
other problems in your code.

--Radu

Maca wrote:
&gt;<i> Dear All</i>
&gt;<i> I am attempting to solve a structure in the state space using IDA.</i>
&gt;<i> Everything went fine until the program suddenly crashed. I found out </i>
&gt;<i> that at some point in the iterations the function IDAStep is called </i>
&gt;<i> but the nflag from the function IDANls is not IDA_SUCCESS so the </i>
&gt;<i> program doesn't call the function IDATestError, therefore the variable </i>
&gt;<i> err_k is not defined and when trying to call IDAHandleNFlag, it crashes</i>
because err_k is not defined.
&gt;<i> As a &quot;solution&quot; I uncommented the if test before the call to </i>
&gt;<i> IDATestError so the variable would be defined at all times.</i>
&gt;<i> I still have to do some more checking on my results but they seem very </i>
&gt;<i> reasonable.</i>
&gt;<i>  </i>
&gt;<i>  I am not very familiar with the variables used along the program and </i>
&gt;<i> not too familiar with all the mathematical procedures either so there </i>
&gt;<i> probably is a better way to solve this problem so if you can help me </i>
&gt;<i> with some hints, I will be grateful.</i>
&gt;<i>  </i>
&gt;<i> Thanks,</i>
&gt;<i> Macarena Schachter.</i>
&gt;<i>  </i>
&gt;<i> PhD Candidate</i>
&gt;<i> Department of Civil, Structural and Environmental Engineering.</i>
&gt;<i> University at Buffalo.</i>
&gt;<i>  </i>
&gt;<i> </i>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00580" href="msg00580.html">Re: [sundials-users] Problem with IDA</a></strong>
<ul><li><em>From:</em> Radu Serban &lt;radu@llnl.gov&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00577" href="msg00577.html">Re: [sundials-users] Problem with IDA</a></strong>
<ul><li><em>From:</em> Radu Serban &lt;radu@llnl.gov&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00578.html">Re: [sundials-users] custom linear solvers for cvodes, and ida</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00580.html">Re: [sundials-users] Problem with IDA</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00577.html">Re: [sundials-users] Problem with IDA</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00580.html">Re: [sundials-users] Problem with IDA</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00579">
<strong>Main</strong></a></li>
<li><a href="threads.html#00579">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
