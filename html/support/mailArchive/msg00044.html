<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: Shared libs -->
<!--X-From-R13: Dnqh Ereona <freona1Nyyay.tbi> -->
<!--X-Date: Thu, 21 Apr 2005 12:43:04 &#45;0700 (PDT) -->
<!--X-Message-Id: 42680205.5050805@llnl.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 200504182239.01271.andrew@eq.uc.pt -->
<!--X-Reference: 42655396.4080902@llnl.gov -->
<!--X-Reference: 200504211630.34482.andrew@eq.uc.pt -->
<!--X-Head-End-->
<html>
<head>
<title>Re: Shared libs</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00043.html">Date Prev</a>] [<a href="msg00045.html">Date Next</a>] [<a href="msg00043.html">Thread Prev</a>] [<a href="msg00045.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00044">Date Index</a></b>]
[<b><a href="threads.html#00044">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Shared libs</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Radu Serban &lt;<a href="mailto:serban1%40llnl.gov">serban1@llnl.gov</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Thu, 21 Apr 2005 12:41:57 -0700</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Andrey,</pre><br>
<tt>Andrey Romanenko wrote:
</tt><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">Dear Aaron,</pre><br>
<pre style="margin: 0em;">Thank you very much for your feedback. Please find my comments below.</pre><br>
<pre style="margin: 0em;">On Tuesday 19 April 2005 19:53, Aaron Collier wrote:</pre><br>
<br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">We chose to build only static libraries by default for a couple reasons:
  - Although libtool works fairly well on most common platforms, the
    process of building shared libraries tends to be
    platform-specific, so it's easier to build only static
    libraries.
</pre></blockquote><pre style="margin: 0em;"><br></pre><br>
<tt>Here I am glad to report that on (my) i386 Debian Linux the dynamic libraries 
build 
is  problem free.  The only tiny glitch is that the resulting libraries have 
no *.so extension. I am going to fix that locally.</tt><br>
<br>
</blockquote><tt><br>Hmmm, you could try to update the ltmain.sh file in sundials/config. The version of ltmain.sh that we pack with SUNDIALS 
is 1.4.3.</tt><br>
<br>
<tt>NOTE: If afterwards you get compilation errors from libtool (&quot;unable to infer tagged configuration&quot;),  this is due to a 
mismatch between the compilers used to install libtool on your system and what you use to compile SUNDIALS. This may 
happen anyway for the compilation of nvec_par and parallel examples (if you use that) if you use an MPI compiler scrip 
(e.g. mpicc). One fix for that is to add a dummy --tag to libtool (if supported by your libtool version) in the 
appropriate Makefiles. This is a strange fix (after all, if libtool can ignore a dummy tag, it should be able to work 
fine if --tag is not specified), but it seems to work.</tt><br>
<br>
<pre style="margin: 0em;">Take a look at
  <a  href="http://people.debian.org/~keybuk/libtool-missing_so.html">http://people.debian.org/~keybuk/libtool-missing_so.html</a>
for more information on the missing .so extension</pre><br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">Version numbers weren't incorporated into the names of SUNDIALS
libraries for the following reasons:
  - Library management is a task best left to the system administrator.
  - It's easy enough to create a version-specific subdirectory using
    standard configure options.
</pre></blockquote><pre style="margin: 0em;"><br></pre><br>
<tt>Ok, I see your point. However, you do not set SONAME explicitly, either.<br>
Suppose you have an application compiled and linked dynamically to SUNDIALS.<br>
Suppose that there is a minor bugfix in the suit inself without any interface 
change. In this case the library maintains the same SONAME and can be 
upgraded without recompiling the application. If, on the other hand, there is 
an interface change (as in the latest release) the SONAME should be different 
from the previous release, otherwise the compiled application will link to 
the new library and most likely blow.</tt><br>
<br>
</blockquote><tt><br>As Aaron mentioned, we prefer to keep track of different versions through subdirectories whose names encode the version 
number, rather than having the version encoded in the library name.</tt><br>
<br>
<tt>But it shouldn't be too difficult for you to opt for the second variant (there are not that many SUNDIALS libraries). 
You should be able to pass &quot;-soname=name&quot; to the linker yourself, using the --with-ldflags option to configure (or using 
&quot;-Wl,-soname -Wl,name&quot; with the --with-cflags).</tt><br>
<br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">Finally, I should mention that SUNDIALS is heavily used internally at
LLNL and this configuration setup best serves our development and
research needs.
</pre></blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">Thank you very much for the explanation and for the software!</pre><br>
<pre style="margin: 0em;">Andrey</pre><br>
</blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">--Radu</pre><br>
<pre style="margin: 0em;"><br>--
   Radu Serban
   Center for Applied Scientific Computing   [email] radu@llnl.gov
   Lawrence Livermore National Laboratory    [phone] 925-424-4852
   P.O. Box 808, L-560                       [fax]   925-422-6287
   Livermore, CA 94551</pre><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00045" href="msg00045.html">Re: Shared libs</a></strong>
<ul><li><em>From:</em> Andrey Romanenko &lt;andrew@eq.uc.pt&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00041" href="msg00041.html">Shared libs</a></strong>
<ul><li><em>From:</em> Andrey Romanenko &lt;andrew@eq.uc.pt&gt;</li></ul></li>
<li><strong><a name="00042" href="msg00042.html">Re: Shared libs</a></strong>
<ul><li><em>From:</em> Aaron Collier &lt;collier6@llnl.gov&gt;</li></ul></li>
<li><strong><a name="00043" href="msg00043.html">Re: Shared libs</a></strong>
<ul><li><em>From:</em> Andrey Romanenko &lt;andrew@eq.uc.pt&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00043.html">Re: Shared libs</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00045.html">Re: Shared libs</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00043.html">Re: Shared libs</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00045.html">Re: Shared libs</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00044">
<strong>Main</strong></a></li>
<li><a href="threads.html#00044">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
