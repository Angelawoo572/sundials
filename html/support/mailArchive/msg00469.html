<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [sundials&#45;users] Name and location changes of include and library files -->
<!--X-From-R13: Dnqh Ereona <enqhNyyay.tbi> -->
<!--X-Date: Tue, 06 Jun 2006 14:49:07 &#45;0700 -->
<!--X-Message-Id: 4485F7B1.4060509@llnl.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 4485DC19.8000008@ncifcrf.gov -->
<!--X-Reference: 4485E725.9030609@llnl.gov -->
<!--X-Reference: 4485F39E.70003@bioanalysis.org -->
<!--X-Head-End-->
<html>
<head>
<title>Re: [sundials-users] Name and location changes of include and library files</title>
<meta name="author" content="Radu Serban">
<meta name="description" content="suite of nonlinear differential algebraic equation solvers">
<meta name="keywords" content="SUNDIALS, CVODE, CVODES, IDA, KINSOL">
<meta name="keywords" content="ODE, DAE, sensitivity">
<meta name="keywords" content="differential, algebraic">
<link REL="SHORTCUT ICON" HREF="img/favicon.ico" type="image/x-icon">
<link REL="ICON" HREF="img/favicon.ico" type="image/x-icon">
<link href="../../sundials_styles.css" rel="stylesheet" type="text/css">
<script language="JavaScript">
<!--
homeon = new Image();           homeon.src = "../../graphics/home_buttonH.png";
homeoff = new Image();          homeoff.src = "../../graphics/home_button.png";
descriptionon = new Image();    descriptionon.src = "../../graphics/description_buttonH.png";
descriptionoff = new Image();   descriptionoff.src = "../../graphics/description_button.png";
documentationon = new Image();  documentationon.src = "../../graphics/documentation_buttonH.png";
documentationoff = new Image(); documentationoff.src = "../../graphics/documentation_button.png";
downloadon = new Image();       downloadon.src = "../../graphics/download_buttonH.png";
downloadoff = new Image();      downloadoff.src = "../../graphics/download_button.png";
supporton = new Image();        supporton.src = "../../graphics/support_buttonH.png";
supportoff = new Image();       supportoff.src = "../../graphics/support_button.png";
//-->
</script>
<script src="../../sunjs.js" type="text/javascript" language="javascript1.2"></script>
</head>
<!-- ******************************************************************************** -->
<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
  <td height="60" background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  <td width="116"><img SRC="../../graphics/head_top_left.png" height="60" width="116" border="0"></td>
  <td width="720"><img SRC="../../graphics/head_mail_top_right.png" height="60" width="720" border="0"></td>
  <td background="../../graphics/table_bck1.gif"><img src="../../graphics/table_bck1.gif" width="5" height="60"></td>
  </tr>
  <tr valign="top">
  <td height="127" background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  <td width="116">
    <a href="../../main.html" onMouseOver="img_act('home'); return true;" onMouseOut="img_inact('home'); return true;"><img src="../../graphics/home_button.png" border="0" name="home"></a><br>
    <a href="../../description/description.html" onMouseOver="img_act('description'); return true;" onMouseOut="img_inact('description'); return true;"><img src="../../graphics/description_button.png" border="0" name="description"></a><br>
    <a href="../../documentation/documentation.html" onMouseOver="img_act('documentation'); return true;" onMouseOut="img_inact('documentation'); return true;"><img src="../../graphics/documentation_button.png" border="0" name="documentation"></a><br>
    <a href="../../download/download.html" onMouseOver="img_act('download'); return true;" onMouseOut="img_inact('download'); return true;"><img src="../../graphics/download_button.png" border="0" name="download"></a><br>
    <a href="../../support/support.html" onMouseOver="img_act('support'); return true;" onMouseOut="img_inact('support'); return true;"><img src="../../graphics/support_button.png" border="0" name="support"></a><br>
    <img SRC="../../graphics/line_tl.gif" height="7" width="116" border="0"></td>
  <td width="720">
      <img SRC="../../graphics/head_bottom_right.png" height="120" width="720" border="0"><br>
      <img SRC="../../graphics/line_tr.gif" height="7" width="720" border="0"></td>
  <td background="../../graphics/table_bck2.gif"><img src="../../graphics/table_bck2.gif" width="5" height="127"></td>
  </tr>
  <tr valign="top">
  <td background="../../graphics/table_bck3.gif"></td>
  <td width="116" valign="bottom" align="center" background="../../graphics/table_bck5.gif"><img SRC="../../graphics/logo.png" border="0"></td>
  <td width="720" bgcolor="#ffffff">
  <div id="content">   
<!-- Start content for this page -->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<p class="links">
[<a href="msg00468.html">Date Prev</a>] [<a href="msg00470.html">Date Next</a>] [<a href="msg00468.html">Thread Prev</a>] [<a href="msg00473.html">Thread Next</a>]<br>
[<b><a href="maillist.html#00469">Date Index</a></b>]
[<b><a href="threads.html#00469">Thread Index</a></b>]
</p>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sundials-users] Name and location changes of include and library files</h1>
<div class="frame">
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<table border=0 cellpadding=2 cellspacing=0>
<tr>
<td align="right"><b>
<em>From</em></b></td>
<td align="left">
Radu Serban &lt;<a href="mailto:radu%40llnl.gov">radu@llnl.gov</a>&gt;</td>
</tr>

<tr>
<td align="right"><b>
<em>Date</em></b></td>
<td align="left">
Tue, 06 Jun 2006 14:46:25 -0700</td>
</tr>

</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
</div>
<div class="container">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">Hi Joe,</pre><br>
Joe Ivanic wrote:
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">Hi Radu,</pre><br>
Excellent. Thanks. I was going through the documentation and found a 
nice table of the new headers and libraries and have managed to fill in 
the missing pieces so that all of the required headers and libraries 
have been found now.
</blockquote><pre style="margin: 0em;"><br>Yes, that's the table in Section 2.4 of the user guides.</pre><br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">I now only have one missing piece (I think). There is a call to:</pre><br>
<pre style="margin: 0em;">CVSpgmrSetJacTimesVecFn</pre><br>
<pre style="margin: 0em;">in the BioNetGen code which generates the compilation error:</pre><br>
/users/priapp/ivanicj/BioNetGen2/Network2/network.c:2024: undefined 
reference to<br>
`CVSpgmrSetJacTimesVecFn'<br>
<br>
I cannot for the life of me find this routine anywhere in the cvode 
source files?? Maybe I am missing a header or library file?
</blockquote><br>With the addition of the 2 new iterative linear solvers (BiCG-stab and TF-QMR), several SPGMR functions were renamed to support all 3 
iterative linear solvers. Instead of CVSpgmrSetJacTimesVecFn use CVSpilsSetJacTimesVecFn to set the Jv function and (optional) user data. 
See section 5.5.5.4 of the CVODE user guide.<br>
<br>
Basically, the names of all optional &quot;set&quot; and &quot;get&quot; functions for the SPGMR solver were changed to reflect their availability for all 3 
SPILS (Scaled Preconditioned Iterative Linear Solvers, to clarify the acronym :-)). In addition, the types of the three user-provided 
functions associated with SPILS were also changed: CVSpilsPrecSetupFn, CVSpilsPrecSolveFn, CVSpilsJacTimesVecFn.<br>
<br>
<pre style="margin: 0em;">--Radu</pre><br>
<br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;"><br>Joe</pre><br>
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;"><br>Hi Joe,</pre><br>
Indeed, to prevent name clashes and polluting the include/ directory 
(especially for system-wide installs of SUNDIALS), the names and 
location of exported header files have been changed throughout from 
the previous release. For more details, see section 2.4 (&quot;Installed 
libraries and exported header files&quot;) in any of the user guides.<br>
<br>
At the same time, we renounced using the &quot;shared&quot; library 
libsundials_shared, all shared object files being now linked in each 
of the solver libraries (such as libsundials_cvode).<br>
<br>
Using CVODE as an example, in the makefile for your application, 
assuming the SUNDIALS header files were installed under incdir/ and 
the SUNDIALS libraries under libdir/, you must add the compiler 
preprocessor flags: &quot;-I incdir -I incdir/cvode -I incdir/sundials&quot;. 
Also, you must pass to the linker the flags &quot;-L libdir 
-lsundials_cvode -lsundials_nvecserial&quot; (replace -lsundials_nvecserial 
with -lsundials_nvecparallel to use the parallel NVECTOR module). When 
using the FCMIX interface, the linker must be passed the libraries 
&quot;-lsundials_fcvode -lsundials_cvode -lsundials_fnvecserial 
-lsundials_nvecserial&quot;.<br>
<br>
Look at the makefiles generated in the appropriate example directories 
upon configuring SUNDIALS.<br>
<br>
Although it is perfectly safe to explicitly include as many of the 
SUNDIALS header files as you wish (they all include safeties against 
double inclusion), the only header files your source needs to include 
are (again using CVODE as an example):<br>
1) main solver header file (cvode.h)<br>
2) one (or more) linear solver module interface header files 
(cvode_dense.h, cvode_band.h, cvode_diag.h, cvode_spgmr.h, 
cvode_spbcgs.h, cvode_sptfqmr.h)<br>
3) NVECTOR module header file (nvector_serial.h or nvector_parallel.h)<br>
<br>
The above header files include other files they require (in principal 
from the common header files installed under incdir/sundials) so that 
these do not need to be explicitly included by the user code (Joe, in 
your case, it is not required to include sundials_types.h, 
sundials_dense.h, or sundials_spgmr.h).<br>
<br>
In addition to the 3 types of header files above, depending on the 
options you use, you may need to include additional header files for 
preconditioning (if using one of the provided preconditioner modules), 
or for support of direct dense linear solvers (sundials_smalldense.h), 
if you wish to build a user-provided preconditioner based on functions 
defined there, or for transparent support of some math functions with 
realtype arguments (sundials_math.h)<br>
<br>
Finally, here's the name mapping for header file names (CVODE only - 
the others are similar). Best viewed in fixed font...<br>
<br>
<pre style="margin: 0em;">
<tt>
NEW            OLD        NOTES
cvode          cvode
cvode_band     cvband
cvode_dense    cvdense
cvode_diag     cvdiag
cvode_spils    -           new header file (common for all iterative linear solver 
                                            interfaces)
cvode_spgmr    cvspgmr
cvode_spbcgs   -           new linear solver module interface
cvode_sptfqmr  -           new linear solver module interface
cvode_bandpre  cvbandpre
cvode_bbdpre   cvbbdpre
cvode_impl     -           was not exported before (provided now only for developers 
                           of new linear solver modules)

sundials_types.h       sundialstypes
sundials_nvector.h     nvector
sundials_math.h        sundialsmath
sundials_band.h        band
sundials_dense.h       dense
sundials_smalldense.h  smalldense
sundials_spgmr.h       spgmr
sundials_spbcgs.h      -                new generic linear solver
sundials_sptfqmr.h     -                new generic linear solver
sundials_iterative.h   iterative
sundials_config.h      sundials_config
</tt></pre><br>
<pre style="margin: 0em;">--Radu</pre><br>
<br>
</blockquote><pre style="margin: 0em;"><br></pre><br>
</blockquote><pre style="margin: 0em;"><br></pre><br>
<pre style="margin: 0em;">--
   Radu Serban
   Center for Applied Scientific Computing   [email] radu@llnl.gov
   Lawrence Livermore National Laboratory    [phone] 925-424-4852
   P.O. Box 808, L-560                       [fax]   925-422-6287
   Livermore, CA 94551</pre><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<div class="container">
<table width="95%" frame="below"><tr><td></td></table>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00466" href="msg00466.html">[sundials-users] Name and location changes of include and library files</a></strong>
<ul><li><em>From:</em> Joe Ivanic &lt;jivanic@ncifcrf.gov&gt;</li></ul></li>
<li><strong><a name="00467" href="msg00467.html">Re: [sundials-users] Name and location changes of include and library files</a></strong>
<ul><li><em>From:</em> Radu Serban &lt;radu@llnl.gov&gt;</li></ul></li>
<li><strong><a name="00468" href="msg00468.html">Re: [sundials-users] Name and location changes of include and library files</a></strong>
<ul><li><em>From:</em> Joe Ivanic &lt;jivanic@bioanalysis.org&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00468.html">Re: [sundials-users] Name and location changes of include and library files</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00470.html">Re: [sundials-users] Roundoff problem in CVODE One-Step-Mode for large t and small h</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00468.html">Re: [sundials-users] Name and location changes of include and library files</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00473.html">[sundials-users] Sundials installation...</a></strong>
</li>

<li>Index(es):
<ul>
<li><a href="maillist.html#00469">
<strong>Main</strong></a></li>
<li><a href="threads.html#00469">
<strong>Thread</strong></a></li>
</ul>
</li>
</ul>
</div>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!-- End content for this page -->
  </div>
  </td>
  <td background="../../graphics/table_bck3.gif"></td>
  </tr>
  <tr valign="top">
  <td height="17" background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  <td width="116"><a HREF="http://www.llnl.gov/disclaimer.html" target="_top"><img SRC="../../graphics/line_bl.gif" height="17" width="116" border="0"></a></td>
  <td width="720"><img SRC="../../graphics/line_br.gif" height="17" width="720" border="0"></td>
  <td background="../../graphics/table_bck4.gif"><img src="../../graphics/table_bck4.gif" width="5" height="17"></td>
  </tr>
  </table>
</body>
</html>
