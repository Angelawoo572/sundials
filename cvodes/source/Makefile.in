#--------------------------------------------------------------------------------
# File        : Makefile
# Programmers : Radu Serban @ LLNL
#--------------------------------------------------------------------------------
# Makefile for the CVODES package.
# @configure_input@
#--------------------------------------------------------------------------------

# Shell
SHELL = @SHELL@

# SUNDIALS instalation directory
prefix      = @prefix@
exec_prefix = @exec_prefix@
includedir  = @includedir@
libdir      = @libdir@

# Path to sources
srcdir = @srcdir@
VPATH  = @srcdir@

# Archiver program
AR = @AR@

# Compiler and compiler options
CC       = @CC@
CPPFLAGS = @CPPFLAGS@
CFLAGS   = @CFLAGS@

# CVODES and SHARED include directories
SHARED_INC_DIR = ${srcdir}/../../shared/include
CVODES_INC_DIR = ${srcdir}/../include

INCDIRS = -I${CVODES_INC_DIR} -I${SHARED_INC_DIR}

# CVODES library name
CVODES_LIB = libcvodes.a

# Source and object files
SRC =	${srcdir}/cvodes.c \
	${srcdir}/cvodea.c \
	${srcdir}/cvsband.c \
	${srcdir}/cvsdense.c \
	${srcdir}/cvsdiag.c \
	${srcdir}/cvsspgmr.c \
	${srcdir}/cvsbandpre.c \
	${srcdir}/cvsbbdpre.c \
	${srcdir}/cvodec.c

OBJ = cvodes.o cvodea.o cvsband.o cvsdense.o cvsdiag.o cvsspgmr.o cvsbandpre.o cvsbbdpre.o cvodec.o

#--------------------------------------------------------------------------------
# Make rules
#--------------------------------------------------------------------------------

all: ${OBJ}

install: ${OBJ}
	${AR} ${CVODES_LIB} ${OBJ}
	cp ${CVODES_LIB} ${libdir}
	cp ${CVODES_INC_DIR}/cvodes.h     ${includedir}
	cp ${CVODES_INC_DIR}/cvodea.h     ${includedir}
	cp ${CVODES_INC_DIR}/cvodec.h     ${includedir}
	cp ${CVODES_INC_DIR}/cvsdense.h   ${includedir}
	cp ${CVODES_INC_DIR}/cvsband.h    ${includedir}
	cp ${CVODES_INC_DIR}/cvsdiag.h    ${includedir}
	cp ${CVODES_INC_DIR}/cvsspgmr.h   ${includedir}
	cp ${CVODES_INC_DIR}/cvsbandpre.h ${includedir}
	cp ${CVODES_INC_DIR}/cvsbbdpre.h  ${includedir}

clean:
	rm -f ${OBJ}
	rm -f ${CVODES_LIB}

uninstall:
	rm -f ${libdir}/${CVODES_LIB}
	rm -f ${includedir}/cvodes.h
	rm -f ${includedir}/cvodea.h
	rm -f ${includedir}/cvodec.h
	rm -f ${includedir}/cvsdense.h
	rm -f ${includedir}/cvsband.h
	rm -f ${includedir}/cvsdiag.h
	rm -f ${includedir}/cvsspgmr.h
	rm -f ${includedir}/cvsbandpre.h
	rm -f ${includedir}/cvsbbdpre.h

.c.o:
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<

#---End of Makefile---
