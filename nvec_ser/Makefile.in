#--------------------------------------------------------------------------------------
# File        : Makefile
# Programmers : Radu Serban @ LLNL
#--------------------------------------------------------------------------------------
# Makefile for the serial NVECTOR module.
# @configure_input@
#--------------------------------------------------------------------------------------

# Shell
SHELL = @SHELL@

# SUNDIALS instalation directory
prefix      = @prefix@
exec_prefix = @exec_prefix@
includedir  = @includedir@
libdir      = @libdir@

# Path to sources
srcdir = @srcdir@

# Archiver programs
AR = @AR@

# Compiler and compiler options
CC       = @CC@
CPPFLAGS = @CPPFLAGS@
CFLAGS   = @CFLAGS@

# SHARED include directory
SHARED_INC_DIR  = ${srcdir}/../shared/include
NVECSER_INC_DIR = ${srcdir}

INCDIRS = -I${SHARED_INC_DIR} -I${NVECSER_INC_DIR}

# NVECSERIAL libraries
NVECSER_LIB  = libnvecserial.a
FNVECSER_LIB = libfnvecserial.a

# Source and object files
SRC =	${srcdir}/nvector_serial.c \
	${srcdir}/fnvector_serial.c

OBJ = nvector_serial.o fnvector_serial.o

#--------------------------------------------------------------------------------
# Make rules
#--------------------------------------------------------------------------------

all: $(OBJ)

install: ${OBJ}
	${AR} ${NVECSER_LIB}  nvector_serial.o
	${AR} ${FNVECSER_LIB} fnvector_serial.o
	cp ${NVECSER_LIB}  ${libdir}
	cp ${FNVECSER_LIB} ${libdir}
	cp ${NVECSER_INC_DIR}/nvector_serial.h  ${includedir}
	cp ${NVECSER_INC_DIR}/fnvector_serial.h ${includedir}

clean:
	rm -f ${OBJ}
	rm -f ${NVECSER_LIB}
	rm -f ${FNVECSER_LIB}

uninstall:
	rm -f ${libdir}/${NVECSER_LIB}
	rm -f ${libdir}/${FNVECSER_LIB}
	rm -f ${includedir}/nvector_serial.h
	rm -f ${includedir}/fnvector_serial.h

${OBJ}: %.o : ${srcdir}/%.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<

#---End of Makefile---