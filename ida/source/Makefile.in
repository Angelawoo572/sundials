#--------------------------------------------------------------------------------
# File        : Makefile
# Programmers : Radu Serban @ LLNL
#--------------------------------------------------------------------------------
# Makefile for the IDA package.
# @configure_input@
#--------------------------------------------------------------------------------

# Shell
SHELL = @SHELL@

# SUNDIALS instalation directory
prefix      = @prefix@
exec_prefix = @exec_prefix@
includedir  = @includedir@
libdir      = @libdir@

# Path to sources
srcdir = @srcdir@

# Archiver program
AR = @AR@

# Compiler and compiler options
CC       = @CC@
CPPFLAGS = @CPPFLAGS@
CFLAGS   = @CFLAGS@

# IDA and SHARED include directories
SHARED_INC_DIR = ${srcdir}/../../shared/include
IDA_INC_DIR    = ${srcdir}/../include

INCDIRS = -I${IDA_INC_DIR} -I${SHARED_INC_DIR}

# IDA library name
IDA_LIB = libida.a

# Source and object files
SRC =	${srcdir}/ida.c \
	${srcdir}/idaband.c \
	${srcdir}/idadense.c \
	${srcdir}/idaspgmr.c \
	${srcdir}/idabbdpre.c

OBJ = ida.o idaband.o idadense.o idaspgmr.o idabbdpre.o

#--------------------------------------------------------------------------------
# Make rules
#--------------------------------------------------------------------------------

all: ${OBJ}

install: ${OBJ}
	${AR} ${IDA_LIB} ${OBJ}
	cp ${IDA_LIB} ${libdir}
	cp ${IDA_INC_DIR}/ida.h       ${includedir}
	cp ${IDA_INC_DIR}/idadense.h  ${includedir}
	cp ${IDA_INC_DIR}/idaband.h   ${includedir}
	cp ${IDA_INC_DIR}/idaspgmr.h  ${includedir}
	cp ${IDA_INC_DIR}/idabbdpre.h ${includedir}

clean:
	rm -f ${OBJ}
	rm -f ${IDA_LIB}

uninstall:
	rm -f ${libdir}/${IDA_LIB}
	rm -f ${includedir}/ida.h
	rm -f ${includedir}/idadense.h
	rm -f ${includedir}/idaband.h
	rm -f ${includedir}/idaspgmr.h
	rm -f ${includedir}/idabbdpre.h

ida.o : ${srcdir}/ida.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
idaband.o : ${srcdir}/idaband.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
idadense.o : ${srcdir}/idadense.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
idaspgmr.o : ${srcdir}/idaspgmr.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
idabbdpre.o : ${srcdir}/idabbdpre.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<

#---End of Makefile---
