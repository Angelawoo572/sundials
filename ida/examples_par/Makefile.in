# File Makefile
#--------------------------------------------------------------------------
# Makefile for the IDA examples using the parallel N_Vector implementation.
# @configure_input@
#--------------------------------------------------------------------------

# Shell
SHELL = @SHELL@

# SUNDIALS instalation directory
prefix      = @prefix@
exec_prefix = @exec_prefix@
includedir  = @includedir@
libdir      = @libdir@

# Path to sources
srcdir = @srcdir@

# Compiler and compiler options
CPPFLAGS  = @CPPFLAGS@
CFLAGS    = @CFLAGS@
LDFLAGS   = @LDFLAGS@
TEMP_LIBS      = @LIBS@
MPICC     = @MPICC@
MPIINC    = @MPIINC@
MPILIBDIR = @MPILIBDIR@
MPILIBS   = @MPILIBS@

# SUNDIALS library and include directories
SUNDIALS_INC_DIR = ${includedir}
SUNDIALS_LIB_DIR = ${libdir}

INCDIRS = -I${SUNDIALS_INC_DIR} ${MPIINC}
LIBDIRS = -L${SUNDIALS_LIB_DIR} ${MPILIBDIR}
LIBS    = ${TEMP_LIBS} -lida -lshared -lnvecparallel -lm ${MPILIBS}

#--------------------------------------------------------------------------------
# Make rules
#--------------------------------------------------------------------------------

all: iheatpk iheatbbd iwebpk iwebbbd

iheatpk : ${srcdir}/iheatpk.c
	${MPICC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} ${srcdir}/$@.c
	${MPICC} ${CFLAGS} ${LDFLAGS} -o $@ $@.o ${LIBDIRS} ${LIBS}
iheatbbd : ${srcdir}/iheatbbd.c
	${MPICC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} ${srcdir}/$@.c
	${MPICC} ${CFLAGS} ${LDFLAGS} -o $@ $@.o ${LIBDIRS} ${LIBS}
iwebpk : ${srcdir}/iwebpk.c
	${MPICC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} ${srcdir}/$@.c
	${MPICC} ${CFLAGS} ${LDFLAGS} -o $@ $@.o ${LIBDIRS} ${LIBS}
iwebbbd : ${srcdir}/iwebbbd.c
	${MPICC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} ${srcdir}/$@.c
	${MPICC} ${CFLAGS} ${LDFLAGS} -o $@ $@.o ${LIBDIRS} ${LIBS}

clean:
	rm -f *.o
	rm -f iheatpk iheatbbd iwebpk iwebbbd

#---End of Makefile---
