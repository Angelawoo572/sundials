#--------------------------------------------------------------------------
# $Revision: 1.1 $
# $Date: 2004-03-31 21:25:30 $
#--------------------------------------------------------------------------
# Programmers: Radu Serban
#--------------------------------------------------------------------------
# Makefile for the FCVODE test examples using parallel N_Vector
# @configure_input@
#--------------------------------------------------------------------------

# Shell
SHELL = @SHELL@

# SUNDIALS instalation directory
prefix      = @prefix@
exec_prefix = @exec_prefix@
includedir  = @includedir@
libdir      = @libdir@

# Path to sources
srcdir = @srcdir@

# Compiler and compiler options
FFLAGS    = @FFLAGS@
LDFLAGS   = @LDFLAGS@
TEMP_LIBS      = @LIBS@
FLIBS     = @FLIBS@
MPIF77    = @MPIF77@
MPIINC    = @MPIINC@
MPILIBDIR = @MPILIBDIR@
MPILIBS   = @MPILIBS@

# SUNDIALS library directory
SUNDIALS_LIB_DIR = ${libdir}

INCDIRS = ${MPIINC}
LIBDIRS = -L${SUNDIALS_LIB_DIR} ${MPILIBDIR}
LIBS    = ${TEMP_LIBS} -lfcvode -lcvode -lfnvecparallel -lnvecparallel -lshared -lm ${MPILIBS}

#--------------------------------------------------------------------------------
# Make rules
#--------------------------------------------------------------------------------

all: pvdiagnf-64bit pvdiagkf-64bit pvdiagkbf-64bit

pvdiagnf-64bit : ${srcdir}/pvdiagnf-64bit.f
	${MPIF77} -c ${FFLAGS} ${INCDIRS} ${srcdir}/$@.f
	${MPIF77} ${FFLAGS} ${LDFLAGS} -o $@ $@.o ${LIBDIRS} ${LIBS} ${FLIBS}
pvdiagkf-64bit : ${srcdir}/pvdiagkf-64bit.f
	${MPIF77} -c ${FFLAGS} ${INCDIRS} ${srcdir}/$@.f
	${MPIF77} ${FFLAGS} ${LDFLAGS} -o $@ $@.o ${LIBDIRS} ${LIBS} ${FLIBS}
pvdiagkbf-64bit : ${srcdir}/pvdiagkbf-64bit.f
	${MPIF77} -c ${FFLAGS} ${INCDIRS} ${srcdir}/$@.f
	${MPIF77} ${FFLAGS} ${LDFLAGS} -o $@ $@.o ${LIBDIRS} ${LIBS} ${FLIBS}

clean:
	rm -f *.o
	rm -f pvdiagnf-64bit pvdiagkf-64bit pvdiagkbf-64bit

#---End of Makefile---
