#--------------------------------------------------------------------------------
# File        : Makefile
# Programmers : Radu Serban @ LLNL
# Version of  : 
#--------------------------------------------------------------------------------
# Makefile for the FCVODE package.
# @configure_input@
#--------------------------------------------------------------------------------

# Shell
SHELL = /bin/sh

# SUNDIALS instalation directory
prefix      = @prefix@
exec_prefix = @exec_prefix@
includedir  = @includedir@
libdir      = @libdir@

# Path to sources
srcdir = @srcdir@

# Archiver program
AR = @AR@

# Compiler and compiler options
CC       = @CC@
CPPFLAGS = @CPPFLAGS@
CFLAGS   = @CFLAGS@

# CVODE and SHARED include directories
SHARED_INC_DIR = ${srcdir}/../../shared/include
CVODE_INC_DIR  = ${srcdir}/../include
FCVODE_INC_DIR = ${srcdir}

INCDIRS = -I${FCVODE_INC_DIR} -I${CVODE_INC_DIR} -I${SHARED_INC_DIR}

# FCVODE library name
FCVODE_LIB = libfcvode.a

# Source and object files
SRC =	${srcdir}/fcvode.c \
	${srcdir}/fcvdense.c \
	${srcdir}/fcvband.c \
	${srcdir}/fcvjtimes.c \
	${srcdir}/fcvpsol.c \
	${srcdir}/fcvpreco.c \
	${srcdir}/fcvbbd.c

OBJ = fcvode.o fcvband.o fcvdense.o fcvjtimes.o fcvpreco.o fcvpsol.o fcvbbd.o

#--------------------------------------------------------------------------------
# Make rules
#--------------------------------------------------------------------------------

all: ${OBJ}

install: ${OBJ}
	${AR} ${FCVODE_LIB} ${OBJ}
	cp ${FCVODE_LIB} ${libdir}

clean:
	rm -f ${OBJ}
	rm -f ${FCVODE_LIB}

uninstall:
	rm -f ${libdir}/${FCVODE_LIB}

fcvode.o : ${srcdir}/fcvode.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
fcvband.o : ${srcdir}/fcvband.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
fcvdense.o : ${srcdir}/fcvdense.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
fcvjtimes.o : ${srcdir}/fcvjtimes.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
fcvpreco.o : ${srcdir}/fcvpreco.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
fcvpsol.o : ${srcdir}/fcvpsol.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<
fcvbbd.o : ${srcdir}/fcvbbd.c
	${CC} -c ${CFLAGS} ${CPPFLAGS} ${INCDIRS} -o $@ $<

#---End of Makefile---
